webpackJsonp([0],[,function(e,t){e.exports=function(e,t,o,i){var n,r=e=e||{},s=typeof e.default;"object"!==s&&"function"!==s||(n=e,r=e.default);var a="function"==typeof r?r.options:r;if(t&&(a.render=t.render,a.staticRenderFns=t.staticRenderFns),o&&(a._scopeId=o),i){var l=Object.create(a.computed||null);Object.keys(i).forEach(function(e){var t=i[e];l[e]=function(){return t}}),a.computed=l}return{esModule:n,exports:r,options:a}}},function(e,t,o){"use strict";function i(e,t){return(0,I.postJson)("/login",{username:e,password:t})}function n(){return(0,I.postJson)("/logout")}function r(){return(0,I.getJson)("/index")}function s(e,t){return(0,I.getJson)("/theme/list",{page_num:e,rows:t})}function a(e){return(0,I.getJson)("/aliyun/token",{bucket:e})}function l(e){return(0,I.postJson)("/theme/add",e)}function u(e){return(0,I.getJson)("/theme/info",{id:e})}function d(e){return(0,I.postJson)("/theme/update",e)}function c(e){return(0,I.postJson)("/theme/remove",{id:e})}function h(e){return(0,I.postJson)("/theme/undo/remove",{id:e})}function m(e){return(0,I.postJson)("/theme/down",{id:e})}function f(e){return(0,I.postJson)("/theme/up",{id:e})}function p(e){return(0,I.getJson)("/theme/set/list",{id:e})}function g(e,t){return(0,I.postJson)("/theme/set/go",{id:e,res_id:t})}function v(e,t){return(0,I.getJson)("/listen/model/list",{page_num:e,rows:t})}function b(e){return(0,I.postJson)("/listen/model/add",e)}function _(){return(0,I.getJson)("/listen/interval/list")}function y(e,t){return(0,I.postJson)("/listen/model/open",{tag_id:e,abandon_flag:t})}function w(e,t,o){return(0,I.postJson)("/listen/model/update",{tag_id:e,name:t,seq_no:o})}function k(e){return(0,I.postJson)("/listen/model/delete",{tag_id:e})}function C(e,t,o,i){return(0,I.getJson)("/listen/model/rear/sort",{name:e,sort:t,page_num:o,rows:i})}function x(e){return(0,I.postJson)("/listen/model/sort/"+e)}function S(e){return(0,I.postJson)("/listen/model/front/sort",{sort:e})}function M(e){return(0,I.getJson)("/listen/model/set/list",{tag_id:e})}function A(e,t){return(0,I.postJson)("/listen/model/set/go",{tag_id:e,series_ids:t})}function F(e){return(0,I.getJson)("/listen/interval/set/list",{id:e})}function D(e,t){return(0,I.postJson)("/listen/interval/set/go",{id:e,series_ids:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.postLogin=i,t.postLogout=n,t.checkLogin=r,t.getThemeList=s,t.getAliyunToken=a,t.postFormData=l,t.getInfo=u,t.modifyFormData=d,t.removeTheme=c,t.undoRemoveTheme=h,t.downTheme=m,t.upTheme=f,t.getChileThemelist=p,t.modifyChileThemelist=g,t.getModalList=v,t.addModalConfig=b,t.getModalConfigList=_,t.changeStatusOpen=y,t.editModal=w,t.deleteModal=k,t.modalListSort=C,t.selectModal=x,t.selectStatus=S,t.getTransferList1=M,t.modifyTransferList1=A,t.getTransferList=F,t.modifyTransferList=D;var I=o(54)},,function(e,t,o){function i(e,t,o){var i=t&&o||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var s=e.random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[i+a]=s[a];return t||r(s)}var n=o(72),r=o(71);e.exports=i},function(e,t,o){"use strict";function i(e,t,o){return e=c+e,e=u(e,t),e=l(e,o),fetch(e,{credentials:"include",method:"get",headers:{Accept:"application/json"}}).then(function(e){return e.json()},function(e){return null}).then(d)}function n(e,t,o){return e=c+e,e=u(e,t),e=l(e,o),fetch(e,{credentials:"include",method:"get"}).then(function(e){return e.json()})}function r(e,t,o){e=c+e,e=u(e,t);var i=getHeadParams(),n=i?Object.assign({},i,{Accept:"application/json"}):Object.assign({},{Accept:"application/json"});return fetch(e,{credentials:"include",method:"get",headers:n}).then(function(e){return e.json()}).then(o)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e=c+e;var i=void 0;if(o){i=new FormData;for(var n in t)i.append(n,t[n])}else i=JSON.stringify(t);return fetch(e,{credentials:"include",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:i}).then(function(e){return e.json()})}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=getHeadParams(),i=o?Object.assign({},o,{Accept:"application/json"}):Object.assign({},{Accept:"application/json"}),n=JSON.stringify(t);return i=Object.assign({},{"Content-Type":"application/json"}),fetch(c+e,{credentials:"include",method:"PUT",headers:i,body:n}).then(function(e){return e.json()})}function l(e,t){if(t){var o=/{\w+}/g,i=e.match(o),n=!0,r=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=a.value,d=u.substr(1,u.length-2);t[d]&&(e=e.replace(u,""+t[d]))}}catch(e){r=!0,s=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw s}}}return e}function u(e,t){if(!t)return e;e.indexOf("?")<0&&(e+="?");for(var o in t)t.hasOwnProperty(o)&&(e.indexOf("?")!==e.length-1&&e.indexOf("&")!==e.length&&(e+="&"),e=e+(o+"=")+t[o]);return e}function d(e){if(e){if(0!==e.resultCode){if(10==e.resultCode){if(checkApp())return kf.login(function(){kf.refresh()});isInstalled()}return e.result}return e.result}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.getJson=i,t.getRawJson=n,t.sendData=r,t.postJson=s,t.updateData=a,o(19);var c="http://172.18.245.22/cms"},,,,,,,,,,,function(e,t,o){"use strict";function i(e,t,o){var i="fail to post "+e+" "+o.status+"'",n=new Error(i);return n.status=o.status,n.method="post",n.url=e,n}function n(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(e){return t}}function r(e){if("undefined"!=typeof XMLHttpRequest){var t=new XMLHttpRequest,o=e.action;t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var r=new FormData;e.data&&Object.keys(e.data).map(function(t){r.append(t,e.data[t])}),r.append(e.filename,e.file),t.onerror=function(t){e.onError(t)},t.onload=function(){if(t.status<200||t.status>=300)return e.onError(i(o,e,t),n(t));e.onSuccess(n(t))},t.open("post",o,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var s=e.headers||{};for(var a in s)s.hasOwnProperty(a)&&null!==s[a]&&t.setRequestHeader(a,s[a]);t.send(r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,o){(function(t){(function(){function t(e){this.tokens=[],this.tokens.links={},this.options=e||d.defaults,this.rules=c.normal,this.options.gfm&&(this.options.tables?this.rules=c.tables:this.rules=c.gfm)}function o(e,t){if(this.options=t||d.defaults,this.links=e,this.rules=h.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=h.breaks:this.rules=h.gfm:this.options.pedantic&&(this.rules=h.pedantic)}function i(e){this.options=e||{}}function n(e){this.tokens=[],this.token=null,this.options=e||d.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options}function r(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function s(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function a(e,t){return e=e.source,t=t||"",function o(i,n){return i?(n=n.source||n,n=n.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(i,n),o):new RegExp(e,t)}}function l(){}function u(e){for(var t,o,i=1;i<arguments.length;i++){t=arguments[i];for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}function d(e,o,i){if(i||"function"==typeof o){i||(i=o,o=null),o=u({},d.defaults,o||{});var s,a,l=o.highlight,c=0;try{s=t.lex(e,o)}catch(e){return i(e)}a=s.length;var h=function(e){if(e)return o.highlight=l,i(e);var t;try{t=n.parse(s,o)}catch(t){e=t}return o.highlight=l,e?i(e):i(null,t)};if(!l||l.length<3)return h();if(delete o.highlight,!a)return h();for(;c<s.length;c++)!function(e){"code"!==e.type?--a||h():l(e.text,e.lang,function(t,o){return t?h(t):null==o||o===e.text?--a||h():(e.text=o,e.escaped=!0,void(--a||h()))})}(s[c])}else try{return o&&(o=u({},d.defaults,o)),n.parse(t.lex(e,o),o)}catch(e){if(e.message+="\nPlease report this to https://github.com/chjj/marked.",(o||d.defaults).silent)return"<p>An error occured:</p><pre>"+r(e.message+"",!0)+"</pre>";throw e}}var c={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:l,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:l,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:l,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};c.bullet=/(?:[*+-]|\d+\.)/,c.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,c.item=a(c.item,"gm")(/bull/g,c.bullet)(),c.list=a(c.list)(/bull/g,c.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+c.def.source+")")(),c.blockquote=a(c.blockquote)("def",c.def)(),c._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",c.html=a(c.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,c._tag)(),c.paragraph=a(c.paragraph)("hr",c.hr)("heading",c.heading)("lheading",c.lheading)("blockquote",c.blockquote)("tag","<"+c._tag)("def",c.def)(),c.normal=u({},c),c.gfm=u({},c.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),c.gfm.paragraph=a(c.paragraph)("(?!","(?!"+c.gfm.fences.source.replace("\\1","\\2")+"|"+c.list.source.replace("\\1","\\3")+"|")(),c.tables=u({},c.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=c,t.lex=function(e,o){return new t(o).lex(e)},t.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},t.prototype.token=function(e,t,o){for(var i,n,r,s,a,l,u,d,h,e=e.replace(/^ +$/gm,"");e;)if((r=this.rules.newline.exec(e))&&(e=e.substring(r[0].length),r[0].length>1&&this.tokens.push({type:"space"})),r=this.rules.code.exec(e))e=e.substring(r[0].length),r=r[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?r:r.replace(/\n+$/,"")});else if(r=this.rules.fences.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"code",lang:r[2],text:r[3]||""});else if(r=this.rules.heading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:r[1].length,text:r[2]});else if(t&&(r=this.rules.nptable.exec(e))){for(e=e.substring(r[0].length),l={type:"table",header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/\n$/,"").split("\n")},d=0;d<l.align.length;d++)/^ *-+: *$/.test(l.align[d])?l.align[d]="right":/^ *:-+: *$/.test(l.align[d])?l.align[d]="center":/^ *:-+ *$/.test(l.align[d])?l.align[d]="left":l.align[d]=null;for(d=0;d<l.cells.length;d++)l.cells[d]=l.cells[d].split(/ *\| */);this.tokens.push(l)}else if(r=this.rules.lheading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:"="===r[2]?1:2,text:r[1]});else if(r=this.rules.hr.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"hr"});else if(r=this.rules.blockquote.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"blockquote_start"}),r=r[0].replace(/^ *> ?/gm,""),this.token(r,t,!0),this.tokens.push({type:"blockquote_end"});else if(r=this.rules.list.exec(e)){for(e=e.substring(r[0].length),s=r[2],this.tokens.push({type:"list_start",ordered:s.length>1}),r=r[0].match(this.rules.item),i=!1,h=r.length,d=0;d<h;d++)l=r[d],u=l.length,l=l.replace(/^ *([*+-]|\d+\.) +/,""),~l.indexOf("\n ")&&(u-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+u+"}","gm"),"")),this.options.smartLists&&d!==h-1&&(a=c.bullet.exec(r[d+1])[0],s===a||s.length>1&&a.length>1||(e=r.slice(d+1).join("\n")+e,d=h-1)),n=i||/\n\n(?!\s*$)/.test(l),d!==h-1&&(i="\n"===l.charAt(l.length-1),n||(n=i)),this.tokens.push({type:n?"loose_item_start":"list_item_start"}),this.token(l,!1,o),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(r=this.rules.html.exec(e))e=e.substring(r[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===r[1]||"script"===r[1]||"style"===r[1]),text:r[0]});else if(!o&&t&&(r=this.rules.def.exec(e)))e=e.substring(r[0].length),this.tokens.links[r[1].toLowerCase()]={href:r[2],title:r[3]};else if(t&&(r=this.rules.table.exec(e))){for(e=e.substring(r[0].length),l={type:"table",header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/(?: *\| *)?\n$/,"").split("\n")},d=0;d<l.align.length;d++)/^ *-+: *$/.test(l.align[d])?l.align[d]="right":/^ *:-+: *$/.test(l.align[d])?l.align[d]="center":/^ *:-+ *$/.test(l.align[d])?l.align[d]="left":l.align[d]=null;for(d=0;d<l.cells.length;d++)l.cells[d]=l.cells[d].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(l)}else if(t&&(r=this.rules.paragraph.exec(e)))e=e.substring(r[0].length),this.tokens.push({type:"paragraph",text:"\n"===r[1].charAt(r[1].length-1)?r[1].slice(0,-1):r[1]});else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"text",text:r[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var h={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:l,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:l,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};h._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,h._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,h.link=a(h.link)("inside",h._inside)("href",h._href)(),h.reflink=a(h.reflink)("inside",h._inside)(),h.normal=u({},h),h.pedantic=u({},h.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),h.gfm=u({},h.normal,{escape:a(h.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:a(h.text)("]|","~]|")("|","|https?://|")()}),h.breaks=u({},h.gfm,{br:a(h.br)("{2,}","*")(),text:a(h.gfm.text)("{2,}","*")()}),o.rules=h,o.output=function(e,t,i){return new o(t,i).output(e)},o.prototype.output=function(e){for(var t,o,i,n,s="";e;)if(n=this.rules.escape.exec(e))e=e.substring(n[0].length),s+=n[1];else if(n=this.rules.autolink.exec(e))e=e.substring(n[0].length),"@"===n[2]?(o=":"===n[1].charAt(6)?this.mangle(n[1].substring(7)):this.mangle(n[1]),i=this.mangle("mailto:")+o):(o=r(n[1]),i=o),s+=this.renderer.link(i,null,o);else if(this.inLink||!(n=this.rules.url.exec(e))){if(n=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(n[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(n[0])&&(this.inLink=!1),e=e.substring(n[0].length),s+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):r(n[0]):n[0];else if(n=this.rules.link.exec(e))e=e.substring(n[0].length),this.inLink=!0,s+=this.outputLink(n,{href:n[2],title:n[3]}),this.inLink=!1;else if((n=this.rules.reflink.exec(e))||(n=this.rules.nolink.exec(e))){if(e=e.substring(n[0].length),t=(n[2]||n[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){s+=n[0].charAt(0),e=n[0].substring(1)+e;continue}this.inLink=!0,s+=this.outputLink(n,t),this.inLink=!1}else if(n=this.rules.strong.exec(e))e=e.substring(n[0].length),s+=this.renderer.strong(this.output(n[2]||n[1]));else if(n=this.rules.em.exec(e))e=e.substring(n[0].length),s+=this.renderer.em(this.output(n[2]||n[1]));else if(n=this.rules.code.exec(e))e=e.substring(n[0].length),s+=this.renderer.codespan(r(n[2],!0));else if(n=this.rules.br.exec(e))e=e.substring(n[0].length),s+=this.renderer.br();else if(n=this.rules.del.exec(e))e=e.substring(n[0].length),s+=this.renderer.del(this.output(n[1]));else if(n=this.rules.text.exec(e))e=e.substring(n[0].length),s+=this.renderer.text(r(this.smartypants(n[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(n[0].length),o=r(n[1]),i=o,s+=this.renderer.link(i,null,o);return s},o.prototype.outputLink=function(e,t){var o=r(t.href),i=t.title?r(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(o,i,this.output(e[1])):this.renderer.image(o,i,r(e[1]))},o.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},o.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,o="",i=e.length,n=0;n<i;n++)t=e.charCodeAt(n),Math.random()>.5&&(t="x"+t.toString(16)),o+="&#"+t+";";return o},i.prototype.code=function(e,t,o){if(this.options.highlight){var i=this.options.highlight(e,t);null!=i&&i!==e&&(o=!0,e=i)}return t?'<pre><code class="'+this.options.langPrefix+r(t,!0)+'">'+(o?e:r(e,!0))+"\n</code></pre>\n":"<pre><code>"+(o?e:r(e,!0))+"\n</code></pre>"},i.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},i.prototype.html=function(e){return e},i.prototype.heading=function(e,t,o){return"<h"+t+' id="'+this.options.headerPrefix+o.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(e,t){var o=t?"ol":"ul";return"<"+o+">\n"+e+"</"+o+">\n"},i.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},i.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},i.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},i.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},i.prototype.tablecell=function(e,t){var o=t.header?"th":"td";return(t.align?"<"+o+' style="text-align:'+t.align+'">':"<"+o+">")+e+"</"+o+">\n"},i.prototype.strong=function(e){return"<strong>"+e+"</strong>"},i.prototype.em=function(e){return"<em>"+e+"</em>"},i.prototype.codespan=function(e){return"<code>"+e+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(e){return"<del>"+e+"</del>"},i.prototype.link=function(e,t,o){if(this.options.sanitize){try{var i=decodeURIComponent(s(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return""}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:"))return""}var n='<a href="'+e+'"';return t&&(n+=' title="'+t+'"'),n+=">"+o+"</a>"},i.prototype.image=function(e,t,o){var i='<img src="'+e+'" alt="'+o+'"';return t&&(i+=' title="'+t+'"'),i+=this.options.xhtml?"/>":">"},i.prototype.text=function(e){return e},n.parse=function(e,t,o){return new n(t,o).parse(e)},n.prototype.parse=function(e){this.inline=new o(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},n.prototype.next=function(){return this.token=this.tokens.pop()},n.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},n.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},n.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,o,i,n="",r="";for(o="",e=0;e<this.token.header.length;e++)({header:!0,align:this.token.align[e]}),o+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(n+=this.renderer.tablerow(o),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],o="",i=0;i<t.length;i++)o+=this.renderer.tablecell(this.inline.output(t[i]),{header:!1,align:this.token.align[i]});r+=this.renderer.tablerow(o)}return this.renderer.table(n,r);case"blockquote_start":for(var r="";"blockquote_end"!==this.next().type;)r+=this.tok();return this.renderer.blockquote(r);case"list_start":for(var r="",s=this.token.ordered;"list_end"!==this.next().type;)r+=this.tok();return this.renderer.list(r,s);case"list_item_start":for(var r="";"list_item_end"!==this.next().type;)r+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(r);case"loose_item_start":for(var r="";"list_item_end"!==this.next().type;)r+=this.tok();return this.renderer.listitem(r);case"html":var a=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(a);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},l.exec=l,d.options=d.setOptions=function(e){return u(d.defaults,e),d},d.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new i,xhtml:!1},d.Parser=n,d.parser=n.parse,d.Renderer=i,d.Lexer=t,d.lexer=t.lex,d.InlineLexer=o,d.inlineLexer=o.output,d.parse=d,e.exports=d}).call(function(){return this||("undefined"!=typeof window?window:t)}())}).call(t,o(10))},function(e,t,o){var i,n;/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */
!function(r){"use strict";i=r,void 0!==(n="function"==typeof i?i.call(t,o,t,e):i)&&(e.exports=n)}(function(){"use strict";function e(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=_({},t),e[H]=this;var o={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(var i in o)!(i in t)&&(t[i]=o[i]);se(t);for(var n in this)"_"===n.charAt(0)&&"function"==typeof this[n]&&(this[n]=this[n].bind(this));this.nativeDraggable=!t.forceFallback&&Q,r(e,"mousedown",this._onTapStart),r(e,"touchstart",this._onTapStart),r(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(r(e,"dragover",this),r(e,"dragenter",this)),ne.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function t(e,t){"clone"!==e.lastPullMode&&(t=!0),S&&S.state!==t&&(l(S,"display",t?"none":""),t||S.state&&(e.options.group.revertClone?(M.insertBefore(S,A),e._animate(k,S)):M.insertBefore(S,k)),S.state=t)}function o(e,t,o){if(e){o=o||K;do{if(">*"===t&&e.parentNode===o||v(e,t))return e}while(e=i(e))}return null}function i(e){var t=e.host;return t&&t.nodeType?t:e.parentNode}function n(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}function r(e,t,o){e.addEventListener(t,o,W)}function s(e,t,o){e.removeEventListener(t,o,W)}function a(e,t,o){if(e)if(e.classList)e.classList[o?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(U," ").replace(" "+t+" "," ");e.className=(i+(o?" "+t:"")).replace(U," ")}}function l(e,t,o){var i=e&&e.style;if(i){if(void 0===o)return K.defaultView&&K.defaultView.getComputedStyle?o=K.defaultView.getComputedStyle(e,""):e.currentStyle&&(o=e.currentStyle),void 0===t?o:o[t];t in i||(t="-webkit-"+t),i[t]=o+("string"==typeof o?"":"px")}}function u(e,t,o){if(e){var i=e.getElementsByTagName(t),n=0,r=i.length;if(o)for(;n<r;n++)o(i[n],n);return i}return[]}function d(e,t,o,i,n,r,s){e=e||t[H];var a=K.createEvent("Event"),l=e.options,u="on"+o.charAt(0).toUpperCase()+o.substr(1);a.initEvent(o,!0,!0),a.to=t,a.from=n||t,a.item=i||t,a.clone=S,a.oldIndex=r,a.newIndex=s,t.dispatchEvent(a),l[u]&&l[u].call(e,a)}function c(e,t,o,i,n,r,s,a){var l,u,d=e[H],c=d.options.onMove;return l=K.createEvent("Event"),l.initEvent("move",!0,!0),l.to=t,l.from=e,l.dragged=o,l.draggedRect=i,l.related=n||t,l.relatedRect=r||t.getBoundingClientRect(),l.willInsertAfter=a,e.dispatchEvent(l),c&&(u=c.call(d,l,s)),u}function h(e){e.draggable=!1}function m(){ee=!1}function f(e,t){var o=e.lastElementChild,i=o.getBoundingClientRect();return t.clientY-(i.top+i.height)>5||t.clientX-(i.left+i.width)>5}function p(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,o=t.length,i=0;o--;)i+=t.charCodeAt(o);return i.toString(36)}function g(e,t){var o=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"===e.nodeName.toUpperCase()||">*"!==t&&!v(e,t)||o++;return o}function v(e,t){if(e){t=t.split(".");var o=t.shift().toUpperCase(),i=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return!(""!==o&&e.nodeName.toUpperCase()!=o||t.length&&((" "+e.className+" ").match(i)||[]).length!=t.length)}return!1}function b(e,t){var o,i;return function(){void 0===o&&(o=arguments,i=this,setTimeout(function(){1===o.length?e.call(i,o[0]):e.apply(i,o),o=void 0},t))}}function _(e,t){if(e&&t)for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}function y(e){return G?G(e).clone(!0)[0]:Y&&Y.dom?Y.dom(e).cloneNode(!0):e.cloneNode(!0)}function w(e){for(var t=e.getElementsByTagName("input"),o=t.length;o--;){var i=t[o];i.checked&&ie.push(i)}}if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var k,C,x,S,M,A,F,D,I,T,E,L,$,B,N,P,O,R,j,z,q={},U=/\s+/g,V=/left|right|inline/,H="Sortable"+(new Date).getTime(),J=window,K=J.document,X=J.parseInt,G=J.jQuery||J.Zepto,Y=J.Polymer,W=!1,Q=!!("draggable"in K.createElement("div")),Z=function(e){return!navigator.userAgent.match(/Trident.*rv[ :]?11\./)&&(e=K.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents)}(),ee=!1,te=Math.abs,oe=Math.min,ie=[],ne=[],re=b(function(e,t,o){if(o&&t.scroll){var i,n,r,s,a,l,u=o[H],d=t.scrollSensitivity,c=t.scrollSpeed,h=e.clientX,m=e.clientY,f=window.innerWidth,p=window.innerHeight;if(I!==o&&(D=t.scroll,I=o,T=t.scrollFn,!0===D)){D=o;do{if(D.offsetWidth<D.scrollWidth||D.offsetHeight<D.scrollHeight)break}while(D=D.parentNode)}D&&(i=D,n=D.getBoundingClientRect(),r=(te(n.right-h)<=d)-(te(n.left-h)<=d),s=(te(n.bottom-m)<=d)-(te(n.top-m)<=d)),r||s||(r=(f-h<=d)-(h<=d),s=(p-m<=d)-(m<=d),(r||s)&&(i=J)),q.vx===r&&q.vy===s&&q.el===i||(q.el=i,q.vx=r,q.vy=s,clearInterval(q.pid),i&&(q.pid=setInterval(function(){if(l=s?s*c:0,a=r?r*c:0,"function"==typeof T)return T.call(u,a,l,e);i===J?J.scrollTo(J.pageXOffset+a,J.pageYOffset+l):(i.scrollTop+=l,i.scrollLeft+=a)},24)))}},30),se=function(e){function t(e,t){return void 0!==e&&!0!==e||(e=o.name),"function"==typeof e?e:function(o,i){var n=i.options.group.name;return t?e:e&&(e.join?e.indexOf(n)>-1:n==e)}}var o={},i=e.group;i&&"object"==typeof i||(i={name:i}),o.name=i.name,o.checkPull=t(i.pull,!0),o.checkPut=t(i.put),o.revertClone=i.revertClone,e.group=o};e.prototype={constructor:e,_onTapStart:function(e){var t,i=this,n=this.el,r=this.options,s=r.preventOnFilter,a=e.type,l=e.touches&&e.touches[0],u=(l||e).target,c=e.target.shadowRoot&&e.path[0]||u,h=r.filter;if(w(n),!k&&!("mousedown"===a&&0!==e.button||r.disabled)&&(u=o(u,r.draggable,n))&&F!==u){if(t=g(u,r.draggable),"function"==typeof h){if(h.call(this,e,u,this))return d(i,c,"filter",u,n,t),void(s&&e.preventDefault())}else if(h&&(h=h.split(",").some(function(e){if(e=o(c,e.trim(),n))return d(i,e,"filter",u,n,t),!0})))return void(s&&e.preventDefault());r.handle&&!o(c,r.handle,n)||this._prepareDragStart(e,l,u,t)}},_prepareDragStart:function(e,t,o,i){var n,s=this,l=s.el,c=s.options,m=l.ownerDocument;o&&!k&&o.parentNode===l&&(R=e,M=l,k=o,C=k.parentNode,A=k.nextSibling,F=o,P=c.group,B=i,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,k.style["will-change"]="transform",n=function(){s._disableDelayedDrag(),k.draggable=s.nativeDraggable,a(k,c.chosenClass,!0),s._triggerDragStart(e,t),d(s,M,"choose",k,M,B)},c.ignore.split(",").forEach(function(e){u(k,e.trim(),h)}),r(m,"mouseup",s._onDrop),r(m,"touchend",s._onDrop),r(m,"touchcancel",s._onDrop),r(m,"pointercancel",s._onDrop),r(m,"selectstart",s),c.delay?(r(m,"mouseup",s._disableDelayedDrag),r(m,"touchend",s._disableDelayedDrag),r(m,"touchcancel",s._disableDelayedDrag),r(m,"mousemove",s._disableDelayedDrag),r(m,"touchmove",s._disableDelayedDrag),r(m,"pointermove",s._disableDelayedDrag),s._dragStartTimer=setTimeout(n,c.delay)):n())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),s(e,"mouseup",this._disableDelayedDrag),s(e,"touchend",this._disableDelayedDrag),s(e,"touchcancel",this._disableDelayedDrag),s(e,"mousemove",this._disableDelayedDrag),s(e,"touchmove",this._disableDelayedDrag),s(e,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(e,t){t=t||("touch"==e.pointerType?e:null),t?(R={target:k,clientX:t.clientX,clientY:t.clientY},this._onDragStart(R,"touch")):this.nativeDraggable?(r(k,"dragend",this),r(M,"dragstart",this._onDragStart)):this._onDragStart(R,!0);try{K.selection?setTimeout(function(){K.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){if(M&&k){var t=this.options;a(k,t.ghostClass,!0),a(k,t.dragClass,!1),e.active=this,d(this,M,"start",k,M,B)}else this._nulling()},_emulateDragOver:function(){if(j){if(this._lastX===j.clientX&&this._lastY===j.clientY)return;this._lastX=j.clientX,this._lastY=j.clientY,Z||l(x,"display","none");var e=K.elementFromPoint(j.clientX,j.clientY),t=e,o=ne.length;if(t)do{if(t[H]){for(;o--;)ne[o]({clientX:j.clientX,clientY:j.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);Z||l(x,"display","")}},_onTouchMove:function(t){if(R){var o=this.options,i=o.fallbackTolerance,n=o.fallbackOffset,r=t.touches?t.touches[0]:t,s=r.clientX-R.clientX+n.x,a=r.clientY-R.clientY+n.y,u=t.touches?"translate3d("+s+"px,"+a+"px,0)":"translate("+s+"px,"+a+"px)";if(!e.active){if(i&&oe(te(r.clientX-this._lastX),te(r.clientY-this._lastY))<i)return;this._dragStarted()}this._appendGhost(),z=!0,j=r,l(x,"webkitTransform",u),l(x,"mozTransform",u),l(x,"msTransform",u),l(x,"transform",u),t.preventDefault()}},_appendGhost:function(){if(!x){var e,t=k.getBoundingClientRect(),o=l(k),i=this.options;x=k.cloneNode(!0),a(x,i.ghostClass,!1),a(x,i.fallbackClass,!0),a(x,i.dragClass,!0),l(x,"top",t.top-X(o.marginTop,10)),l(x,"left",t.left-X(o.marginLeft,10)),l(x,"width",t.width),l(x,"height",t.height),l(x,"opacity","0.8"),l(x,"position","fixed"),l(x,"zIndex","100000"),l(x,"pointerEvents","none"),i.fallbackOnBody&&K.body.appendChild(x)||M.appendChild(x),e=x.getBoundingClientRect(),l(x,"width",2*t.width-e.width),l(x,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var o=e.dataTransfer,i=this.options;this._offUpEvents(),P.checkPull(this,this,k,e)&&(S=y(k),S.draggable=!1,S.style["will-change"]="",l(S,"display","none"),a(S,this.options.chosenClass,!1),M.insertBefore(S,k),d(this,M,"clone",k)),a(k,i.dragClass,!0),t?("touch"===t?(r(K,"touchmove",this._onTouchMove),r(K,"touchend",this._onDrop),r(K,"touchcancel",this._onDrop),r(K,"pointermove",this._onTouchMove),r(K,"pointerup",this._onDrop)):(r(K,"mousemove",this._onTouchMove),r(K,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(o&&(o.effectAllowed="move",i.setData&&i.setData.call(this,o,k)),r(K,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(i){var n,r,s,a,u=this.el,d=this.options,h=d.group,p=e.active,g=P===h,v=!1,b=d.sort;if(void 0!==i.preventDefault&&(i.preventDefault(),!d.dragoverBubble&&i.stopPropagation()),!k.animated&&(z=!0,p&&!d.disabled&&(g?b||(a=!M.contains(k)):O===this||(p.lastPullMode=P.checkPull(this,p,k,i))&&h.checkPut(this,p,k,i))&&(void 0===i.rootEl||i.rootEl===this.el))){if(re(i,d,this.el),ee)return;if(n=o(i.target,d.draggable,u),r=k.getBoundingClientRect(),O!==this&&(O=this,v=!0),a)return t(p,!0),C=M,void(S||A?M.insertBefore(k,S||A):b||M.appendChild(k));if(0===u.children.length||u.children[0]===x||u===i.target&&f(u,i)){if(0!==u.children.length&&u.children[0]!==x&&u===i.target&&(n=u.lastElementChild),n){if(n.animated)return;s=n.getBoundingClientRect()}t(p,g),!1!==c(M,u,k,r,n,s,i)&&(k.contains(u)||(u.appendChild(k),C=u),this._animate(r,k),n&&this._animate(s,n))}else if(n&&!n.animated&&n!==k&&void 0!==n.parentNode[H]){E!==n&&(E=n,L=l(n),$=l(n.parentNode)),s=n.getBoundingClientRect();var _=s.right-s.left,y=s.bottom-s.top,w=V.test(L.cssFloat+L.display)||"flex"==$.display&&0===$["flex-direction"].indexOf("row"),F=n.offsetWidth>k.offsetWidth,D=n.offsetHeight>k.offsetHeight,I=(w?(i.clientX-s.left)/_:(i.clientY-s.top)/y)>.5,T=n.nextElementSibling,B=!1;if(w){var N=k.offsetTop,R=n.offsetTop;B=N===R?n.previousElementSibling===k&&!F||I&&F:n.previousElementSibling===k||k.previousElementSibling===n?(i.clientY-s.top)/y>.5:R>N}else v||(B=T!==k&&!D||I&&D);var j=c(M,u,k,r,n,s,i,B);!1!==j&&(1!==j&&-1!==j||(B=1===j),ee=!0,setTimeout(m,30),t(p,g),k.contains(u)||(B&&!T?u.appendChild(k):n.parentNode.insertBefore(k,B?T:n)),C=k.parentNode,this._animate(r,k),this._animate(s,n))}}},_animate:function(e,t){var o=this.options.animation;if(o){var i=t.getBoundingClientRect();1===e.nodeType&&(e=e.getBoundingClientRect()),l(t,"transition","none"),l(t,"transform","translate3d("+(e.left-i.left)+"px,"+(e.top-i.top)+"px,0)"),t.offsetWidth,l(t,"transition","all "+o+"ms"),l(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){l(t,"transition",""),l(t,"transform",""),t.animated=!1},o)}},_offUpEvents:function(){var e=this.el.ownerDocument;s(K,"touchmove",this._onTouchMove),s(K,"pointermove",this._onTouchMove),s(e,"mouseup",this._onDrop),s(e,"touchend",this._onDrop),s(e,"pointerup",this._onDrop),s(e,"touchcancel",this._onDrop),s(e,"pointercancel",this._onDrop),s(e,"selectstart",this)},_onDrop:function(t){var o=this.el,i=this.options;clearInterval(this._loopId),clearInterval(q.pid),clearTimeout(this._dragStartTimer),s(K,"mousemove",this._onTouchMove),this.nativeDraggable&&(s(K,"drop",this),s(o,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(z&&(t.preventDefault(),!i.dropBubble&&t.stopPropagation()),x&&x.parentNode&&x.parentNode.removeChild(x),M!==C&&"clone"===e.active.lastPullMode||S&&S.parentNode&&S.parentNode.removeChild(S),k&&(this.nativeDraggable&&s(k,"dragend",this),h(k),k.style["will-change"]="",a(k,this.options.ghostClass,!1),a(k,this.options.chosenClass,!1),d(this,M,"unchoose",k,M,B),M!==C?(N=g(k,i.draggable))>=0&&(d(null,C,"add",k,M,B,N),d(this,M,"remove",k,M,B,N),d(null,C,"sort",k,M,B,N),d(this,M,"sort",k,M,B,N)):k.nextSibling!==A&&(N=g(k,i.draggable))>=0&&(d(this,M,"update",k,M,B,N),d(this,M,"sort",k,M,B,N)),e.active&&(null!=N&&-1!==N||(N=B),d(this,M,"end",k,M,B,N),this.save()))),this._nulling()},_nulling:function(){M=k=C=x=A=S=F=D=I=R=j=z=N=E=L=O=P=e.active=null,ie.forEach(function(e){e.checked=!0}),ie.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragover":case"dragenter":k&&(this._onDragOver(e),n(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],i=this.el.children,n=0,r=i.length,s=this.options;n<r;n++)e=i[n],o(e,s.draggable,this.el)&&t.push(e.getAttribute(s.dataIdAttr)||p(e));return t},sort:function(e){var t={},i=this.el;this.toArray().forEach(function(e,n){var r=i.children[n];o(r,this.options.draggable,i)&&(t[e]=r)},this),e.forEach(function(e){t[e]&&(i.removeChild(t[e]),i.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return o(e,t||this.options.draggable,this.el)},option:function(e,t){var o=this.options;if(void 0===t)return o[e];o[e]=t,"group"===e&&se(o)},destroy:function(){var e=this.el;e[H]=null,s(e,"mousedown",this._onTapStart),s(e,"touchstart",this._onTapStart),s(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(s(e,"dragover",this),s(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),ne.splice(ne.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},r(K,"touchmove",function(t){e.active&&t.preventDefault()});try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){W={capture:!1,passive:!1}}}))}catch(e){}return e.utils={on:r,off:s,css:l,find:u,is:function(e,t){return!!o(e,t,e)},extend:_,throttle:b,closest:o,toggleClass:a,clone:y,index:g},e.create=function(t,o){return new e(t,o)},e.version="1.6.0",e})},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function o(e){return"string"!=typeof e&&(e=String(e)),e}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function n(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function r(e){return new Promise(function(t,o){e.onload=function(){t(e.result)},e.onerror=function(){o(e.error)}})}function s(e){var t=new FileReader;return t.readAsArrayBuffer(e),r(t)}function a(e){var t=new FileReader;return t.readAsText(e),r(t)}function l(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(f.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(f.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(e){if(!f.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type&&this.headers.set("content-type",this._bodyBlob.type))},f.blob?(this.blob=function(){var e=n(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var e=n(this);if(e)return e;if(this._bodyBlob)return a(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=n(this);return e||Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(c)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(e){var t=e.toUpperCase();return p.indexOf(t)>-1?t:e}function d(e,t){t=t||{};var o=t.body;if(d.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,o||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=u(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function c(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var o=e.split("="),i=o.shift().replace(/\+/g," "),n=o.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(n))}}),t}function h(e){var t=new i;return(e.getAllResponseHeaders()||"").trim().split("\n").forEach(function(e){var o=e.trim().split(":"),i=o.shift().trim(),n=o.join(":").trim();t.append(i,n)}),t}function m(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof i?t.headers:new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){i.prototype.append=function(e,i){e=t(e),i=o(i);var n=this.map[e];n||(n=[],this.map[e]=n),n.push(i)},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){var o=this.map[t(e)];return o?o[0]:null},i.prototype.getAll=function(e){return this.map[t(e)]||[]},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,i){this.map[t(e)]=[o(i)]},i.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(o){this.map[o].forEach(function(i){e.call(t,i,o,this)},this)},this)};var f={blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e},p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this)},l.call(d.prototype),l.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var g=[301,302,303,307,308];m.redirect=function(e,t){if(-1===g.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=d,e.Response=m,e.fetch=function(e,t){return new Promise(function(o,i){function n(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}var r;r=d.prototype.isPrototypeOf(e)&&!t?e:new d(e,t);var s=new XMLHttpRequest;s.onload=function(){var e=1223===s.status?204:s.status;if(e<100||e>599)return void i(new TypeError("Network request failed"));var t={status:e,statusText:s.statusText,headers:h(s),url:n()},r="response"in s?s.response:s.responseText;o(new m(r,t))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.open(r.method,r.url,!0),"include"===r.credentials&&(s.withCredentials=!0),"responseType"in s&&f.blob&&(s.responseType="blob"),r.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send(void 0===r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},,function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={};i.title=function(e){e=e?e+" - Home":"星宝馆 智慧云 管理后台",window.document.title=e},t.default=i},function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(76),r=i(n),s=o(75),a=i(s),l=o(61),u=i(l),d=[{path:"/",meta:{title:"",auth:!0},component:a.default,children:[{path:"theme",component:u.default.Theme},{path:"sub-theme",component:u.default.SubTheme},{path:"new-page",component:u.default.NewPage},{path:"album",component:u.default.Album},{path:"audio-list",component:u.default.AudioList}]},{path:"/login",meta:{title:"登录",auth:!1},component:r.default}];t.default=d},function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(57),r=i(n),s=o(59),a=i(s),l=o(58),u=i(l);t.default={state:{user:null},getters:{authorizd:function(e){return!!e.user}},mutations:a.default,actions:r.default,modules:{headernav:u.default}}},function(e,t){},function(e,t,o){var i=o(1)(o(43),o(89),null,null);i.options.__file="/SmartCloudAdmin/SmartCloudAdmin/trunk/src/app.vue",i.esModule&&Object.keys(i.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] app.vue: functional components are not supported with templates, they should use render functions."),e.exports=i.exports},,,,,,,,,,,,,,,,,,function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{}},mounted:function(){},beforeDestroy:function(){},methods:{}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=o(4),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default={data:function(){return{audio:{query:{},format:["mp3"],action:"http://xb-vod.oss-cn-hangzhou.aliyuncs.com",options:null,file:{filename:"",duration:0,name:"",percentage:0,response:"",showProgress:!0,size:"",status:"finished",uid:""},viewHost:"http://xb-vod.oss-cn-hangzhou.aliyuncs.com/audio/"}}},methods:{beforeAudioUpload:function(e){var t=this,o=!1,n=(0,r.default)();console.log(n);var s=e.name.split("."),a=s[s.length-1];if(this.audio.format.forEach(function(e){if(e==a)return o=!0}),!o)return this.$Message.error("请选择正确的音频格式文件!"),!1;if("object"!=i(this.audio.options))return this.$Message.error("配置信息还未生成，请稍后!"),!1;var l=n+"."+a;return this.audio.file.filename=l,this.audio.query={OSSAccessKeyId:this.audio.options.accessid,policy:this.audio.options.policy,Signature:this.audio.options.signature,success_action_status:"200",key:this.audio.options.dir+l},new Promise(function(e,o){t.audio.file.showProgress=!0,setTimeout(function(){e()},100)})},onAudioProgress:function(e,t,o){this.audio.file=Object.assign(this.audio.file,t)},onAudioSuccess:function(e,t,o){this.ready=!1,this.audio.file=Object.assign(this.audio.file,t),this.audio.query={},this.formPostData.audio_file.file_name=this.audio.file.name,this.formPostData.audio_file.size=this.audio.file.size,this.formPostData.audio_file.uri=this.audio.viewHost+this.audio.file.filename,this.formValidate.uri=this.audio.viewHost+this.audio.file.filename,this.$refs.formValidate.validate(function(e){console.log(e)})},onAudioError:function(e,t,o){console.log("error:"),console.log(e)},handleRemoveAudio:function(){this.audio.file={filename:"",name:"",response:"",percentage:0,showProgress:!0,status:"200"},this.formPostData.audio_file.uri="",this.formValidate.uri=""}}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=o(4),r=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default={data:function(){return{img:{cover:{status:"",url:"",name:"",filename:"",percentage:0},bg_img:{status:"",url:"",name:"",filename:"",percentage:0},options:null,query:{},format:["jpg","jpeg","png"],action:"http://xb-3sc.oss-cn-hangzhou.aliyuncs.com",viewHost:"http://xb-3sc.xingbook.com/xb-3sc/",viewImg:"",visible:!1}}},methods:{beforeCoverUpload:function(e){if(!this.formatCheck(e))return this.$Message.error("请选择正确的图片格式文件!"),!1;if(console.log("object"!=i(this.img.options)),"object"!=i(this.img.options))return this.$Message.error("配置信息还未生成，请稍后!"),!1;var t=this.createFilename(e);return this.img.cover.filename=t,this.img.query={OSSAccessKeyId:this.img.options.accessid,policy:this.img.options.policy,Signature:this.img.options.signature,success_action_status:"200",key:this.img.options.dir+t},new Promise(function(e,t){setTimeout(function(){e()},100)})},beforeBgImgUpload:function(e){if(!this.formatCheck(e))return this.$Message.error("请选择正确的图片格式文件!"),!1;if(console.log("object"!=i(this.img.options)),"object"!=i(this.img.options))return this.$Message.error("配置信息还未生成，请稍后!"),!1;var t=this.createFilename(e);return this.img.bg_img.filename=t,this.img.query={OSSAccessKeyId:this.img.options.accessid,policy:this.img.options.policy,Signature:this.img.options.signature,success_action_status:"200",key:this.img.options.dir+t},new Promise(function(e,t){setTimeout(function(){e()},100)})},onMaxSize:function(e){this.$Message.error("超出文件大小限制,文件 "+e.name+" 太大，不能超过 2M。")},onBgImgProgress:function(e,t,o){this.img.bg_img=Object.assign(this.img.bg_img,t)},onBgImgSuccess:function(e,t,o){t.name=this.img.bg_img.filename,this.img.bg_img=t,this.formPostData.bg_img=this.img.viewHost+t.name,this.formValidate.bg_img=this.img.viewHost+t.name},onCoverProgress:function(e,t,o){console.log(" percentage1:"+this.img.cover.percentage),this.img.cover=Object.assign(this.img.cover,t),console.log(" percentage2:"+this.img.cover.percentage)},onCoverSuccess:function(e,t,o){t.name=this.img.cover.filename,this.img.cover=t,this.formPostData.audio_file.cover=this.img.viewHost+t.name,this.formValidate.cover=this.img.viewHost+t.name},onImgError:function(e,t,o){console.log("error:"),console.log(e)},handleRemoveCover:function(){this.img.cover={status:"",url:"",name:"",filename:""},this.formValidate.cover="",this.formPostData.audio_file.cover=""},handleRemoveBgImg:function(){this.img.bg_img={status:"",url:"",name:"",filename:""},this.formValidate.bg_img="",this.formPostData.bg_img=""},formatCheck:function(e){var t=e.name.split("."),o=t[t.length-1],i=!1;return this.img.format.forEach(function(e){if(e==o)return i=!0}),i},createFilename:function(e){var t=(0,r.default)(),o=e.name.split(".");return t+"."+o[o.length-1]}}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});o(2),o(6);t.default={beforeRouteEnter:function(e,t,o){o(function(e){return e.$store.state.user?e.$router.replace("/theme"):e.$router.replace("/login")})},data:function(){return{}},computed:{user:function(){return this.$store.state.user?this.$store.state.user:{username:"",is_staff:!1,is_superuser:!1}}},methods:{logout:function(){var e=this;this.$store.dispatch("logout").then(function(){e.$router.replace("/login")})}}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(2);t.default={beforeRouteEnter:function(e,t,o){o(function(e){if(e.$store.state.login)return e.$router.replace({path:"/"})})},data:function(){return{formValidate:{user:"",password:""},ruleInline:{user:[{required:!0,message:"请填写用户名",trigger:"blur"}],password:[{required:!0,message:"请填写密码",trigger:"blur"},{type:"string",min:6,message:"密码长度不能小于6位",trigger:"blur"}]}}},mounted:function(){var e=window.innerHeight;this.pageHeight=e>400?e-400:e},methods:{handleLogin:function(){var e=this;this.$refs.formValidate.validate(function(t){t?(0,i.postLogin)(e.formValidate.user,e.formValidate.password).then(function(t){0==t.resultCode||98==t.resultCode?(e.$Message.success("登录成功!"),e.$store.commit({type:"setLoginState",user:t.data}),e.$refs.formValidate.resetFields(),e.$router.replace({path:"/"})):e.$Message.error(t.resultMsg)}):e.$Message.error("表单验证失败!")})},handleRegister:function(){this.$Message.error("注册暂未开放!")}}}},function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(2),r=o(73),s=i(r),a=o(74),l=i(a),u=o(4),d=(i(u),o(55)),c=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);t.default=e}(d),o(17)),h=i(c);t.default={mixins:[s.default,l.default],created:function(){var e=this;(0,n.getAliyunToken)("xb-vod").then(function(t){0==t.resultCode&&(e.audio.action=t.data.host,e.audio.options=t.data,e.options_status+=1)}),(0,n.getAliyunToken)("xb-3sc").then(function(t){0==t.resultCode&&(e.img.action=t.data.host,e.img.options=t.data,e.options_status+=1)})},data:function(){return{sss:"# hello",options_status:0,modal1:!1,markedResultLength:0,markedResultDescLength:0,guideTipe:"",briefTipe:"",formValidate:{name:"",brief:"",bg_img:"",color:"",file_name:"",size:"",uri:"",guide:"",duration:"",cover:""},formPostData:{name:"",brief:"",bg_img:"",color:"",audio_file:{file_name:"",size:"",uri:"",guide:"",duration:"",cover:""}},imgName:"",uploadList:[],ruleValidate:{name:[{required:!0,message:"名称不能为空",trigger:"blur"},{max:20,message:"名称长度不能超过20",trigger:"blur"}],brief:[{required:!0,message:"请输入简介",trigger:"blur"},{type:"string",max:100,message:"简介长度不能超过100",trigger:"blur"}],uri:[{required:!0,message:"请上传音频",trigger:"submit"}],guide:[{required:!0,message:"请上传导读文章",trigger:"submit"},{type:"string",max:1e3,message:"导读文章长度不能超过1000",trigger:"blur"}],cover:[{required:!1,message:"请上传导读图片",trigger:"blur"}],bg_img:[{required:!1,message:"请上传背景图片",trigger:"blur"}],color:[{required:!1,validator:function(e,t,o){if(""!=t){var i=/^([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/,n=i.test(t);if(console.log(n),!n)return o(new Error("请输入RGB格式的颜色"));o()}else o()},message:"请输入RGB格式的颜色",trigger:"blur"}]}}},props:["formData"],watch:{formData:function(e,t){if(this.$refs.formValidate.resetFields(),e.ifAdd)this.formPostData={name:"",brief:"",bg_img:"",color:"",audio_file:{file_name:"",size:"",uri:"",guide:"",duration:"",cover:""}},this.formValidate={name:"",brief:"",bg_img:"",color:"",file_name:"",size:"",uri:"",guide:"",duration:"",cover:""},this.img.cover={status:"",url:"",name:"",percentage:0,filename:""},this.img.bg_img={status:"",url:"",name:"",percentage:0,filename:""},this.audio.file={filename:"",name:"",response:"",percentage:0,showProgress:!0,status:"200"};else{e=e.modifyData;var o=this.img.viewHost.length,i=this.audio.viewHost.length;this.formPostData=e,this.formValidate={cover:e.audio_file.cover,guide:e.audio_file.guide,uri:e.audio_file.uri,file_name:e.audio_file.file_name,name:e.name,brief:e.brief,bg_img:e.bg_img,color:e.color,size:e.size,duration:e.duration},this.img.cover={status:"finished",showProgress:!0,percentage:0,name:e.audio_file.cover.substring(o,e.audio_file.cover.length),filename:e.audio_file.file_name},this.img.bg_img={status:"finished",showProgress:!0,percentage:0,name:e.bg_img.substring(o,e.bg_img.length)},this.audio.file={filename:e.audio_file.uri.substring(i,e.audio_file.uri.length),name:e.audio_file.file_name,response:"",percentage:0,showProgress:!1,status:"finished"}}}},methods:{getAudioData:function(e){this.audio.file.duration=Math.floor(e.target.duration),this.formValidate.duration=Math.floor(e.target.duration),this.formPostData.audio_file.duration=Math.floor(e.target.duration)},handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.formPostData.name=t.formValidate.name,t.formPostData.color=t.formValidate.color,t.formPostData.brief=t.formValidate.brief,t.formPostData.audio_file.guide=t.formValidate.guide,t.formData.ifAdd?(0,n.postFormData)(t.formPostData).then(function(e){0==e.resultCode?(t.$Message.success("提交成功!"),t.formData.getTabData(),t.formData.addModal=!1):t.$Message.error(e.resultMsg)}):(0,n.modifyFormData)(t.formPostData).then(function(e){0==e.resultCode?(t.$Message.success("提交成功!"),t.formData.getTabData(),t.formData.addModal=!1,t.formData.handleThemeId=""):t.$Message.error(e.resultMsg)}))})},handleClose:function(){this.formData.addModal=!1},checkWords1:function(e){this.$refs.formValidate.validate(function(e){console.log(e)})},checkWords:function(e){this.$refs.formValidate.validate(function(e){console.log(e)})},updateBrief:function(e){this.formValidate.brief=e.target.value,this.markedResultDescLength=this.$refs.markedResultDesc.innerText.replace(/[\r\n]/g,"").length},updateGuide:function(e){this.formValidate.guide=e.target.value,this.markDataLength=this.$refs.markedResult.innerText.replace(/[\r\n]/g,"").length}},computed:{compiledBriefMarkdown:function(){return(0,h.default)(this.formValidate.brief,{sanitize:!0})},compiledGuideMarkdown:function(){return(0,h.default)(this.formValidate.guide,{sanitize:!0})}}}},function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}Object.defineProperty(t,"__esModule",{value:!0});var r,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=o(3),l=(i(a),o(18)),u=i(l),d=o(4),c=i(d),h=o(16),m=i(h),f=o(2),p=o(5);t.default=(r={data:function(){var e=this;return{albumStatus:!1,albumPage:10,newAlbumShow:!1,configSwitch:!1,preview:!1,submitBtnStatus:!1,saveUploadBtnShow:!1,saveConfigBtn:!1,newFlag:!0,uploadAudioOnly:!1,resAlbumId:"",resAudiosIdList:[],savedOrderedIds:[],searchForm:{albumName:""},newAlbumForm:{name:"",img:"",remarks:""},newAlbumRuleValidate:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}],img:[{required:!0,validator:function(t,o,i){setTimeout(function(){e.img.viewImg.length?i():i(new Error("请选择一张导读图片"))},1500)},trigger:"change"}]},uploadAudioForm:{},sourceAudios:[],targetAudios:[],listcol:[{title:"音频专辑",key:"name"},{title:"查看内容",key:"aduio_count",width:200,render:function(t,o){return t("div",{attrs:{class:"configCls"}},[t("span",{attrs:{class:"configNum"}},o.row.aduio_count?o.row.aduio_count:"未配置"),t("Button",{props:{type:"primary",size:"small"},on:{click:function(){e.configAudio(o.row.id),e.currentAlbumId=o.row.id}}},"配置"),t("Button",{props:{type:"primary",size:"small"},on:{click:function(){e.uploadAudioOnly=!0,e.audioList2.length=0,e.currentAlbumId=o.row.id,e.$refs.upload2.clearFiles()}}},"导入音频")])}},{title:"状态",key:"status",width:120,align:"center",render:function(t,o){return t("i-switch",{props:{size:"large",value:"on"==o.row.status},on:{input:function(t){e.changeStatus(o.row.id,t?"on":"off")}}},[t("span",{slot:"open"},"上架"),t("span",{slot:"close"},"下架")])}},{title:"创建时间",key:"create_time",align:"center",sortable:!0},{title:"修改时间",key:"modify_time",align:"center",sortable:!0},{title:"操作",key:"operate",width:140,render:function(t,o){return t("div",{attrs:{class:"configCls"}},[t("Button",{props:{type:"primary",size:"small"},on:{click:function(){e.currentAlbumId=o.row.id,e.newAlbumShow=!0,e.newFlag=!1,e.newAlbumForm.name=o.row.name,e.img.viewImg.length=0,e.img.viewImg.push(o.row.cover),e.newAlbumForm.remarks=o.row.brief}}},"编辑"),t("Button",{props:n({type:"primary",size:"small"},"type","error"),on:{click:function(){e.deleteAlbum(o.row.id)}}},"删除")])}}],listdata:[],img:{cover:{status:"",url:"",name:"",filename:""},options:null,query:{},action:"http://xb-3sc.oss-cn-hangzhou.aliyuncs.com",viewHost:"http://xb-3sc.xingbook.com/xb-3sc/",viewImg:[],visible:!1,currentFileName:""},audio:{query:{},format:["mp3"],action:"http://xb-vod.oss-cn-hangzhou.aliyuncs.com",options:null,file:{filename:"",size:0,name:"",duration:0},audioFlag:!1,viewHost:"http://xb-vod.oss-cn-hangzhou.aliyuncs.com/audio/"},audio2:{query:{},format:["mp3"],action:"http://xb-vod.oss-cn-hangzhou.aliyuncs.com",options:null,file:{filename:"",size:0,name:"",duration:0},audioFlag:!1,viewHost:"http://xb-vod.oss-cn-hangzhou.aliyuncs.com/audio/"},audioList:[],tempAudioFile:{},audioDurationList:[],audioList2:[],tempAudioFile2:{},audioDurationList2:[],series_id:"",res_ids:[],currentAlbumId:"",oldIds:[],newIds:[]}},created:function(){var e=this;(0,f.getAliyunToken)("xb-vod").then(function(t){0==t.resultCode&&(e.audio.action=t.data.host,e.audio.options=t.data,e.audio2.action=t.data.host,e.audio2.options=t.data)}),(0,f.getAliyunToken)("xb-3sc").then(function(t){0==t.resultCode&&(e.img.action=t.data.host,e.img.options=t.data)}),this.getAlbumList(1,null)},watch:{audioList:function(){console.log(this.audioList),this.audioList.length>0?this.saveUploadBtnShow=!0:this.saveUploadBtnShow=!1}},mounted:function(){var e=this,t=this.$refs.upload,o=this.$refs.upload2;t.post=function(o){if(t.format.length){var i=o.name.split(".").pop().toLocaleLowerCase();if(!t.format.some(function(e){return e.toLocaleLowerCase()===i}))return t.onFormatError(o,t.fileList),!1}if(t.maxSize&&o.size>1024*t.maxSize)return t.onExceededSize(o,t.fileList),!1;t.handleStart(o),(new FormData).append(t.name,o),(0,m.default)({headers:t.headers,withCredentials:t.withCredentials,file:o,data:e.getAliOSSData(o),filename:t.name,action:t.action,onProgress:function(e){t.handleProgress(e,o)},onSuccess:function(e){t.handleSuccess(e,o)},onError:function(e,i){t.handleError(e,i,o)}})},o.post=function(t){if(o.format.length){var i=t.name.split(".").pop().toLocaleLowerCase();if(!o.format.some(function(e){return e.toLocaleLowerCase()===i}))return o.onFormatError(t,o.fileList),!1}if(o.maxSize&&t.size>1024*o.maxSize)return o.onExceededSize(t,o.fileList),!1;o.handleStart(t),(new FormData).append(o.name,t),(0,m.default)({headers:o.headers,withCredentials:o.withCredentials,file:t,data:e.getAliOSSData(t),filename:o.name,action:o.action,onProgress:function(e){o.handleProgress(e,t)},onSuccess:function(e){o.handleSuccess(e,t)},onError:function(e,i){o.handleError(e,i,t)}})}},computed:{}},n(r,"watch",{}),n(r,"methods",{renderTransferItem:function(e){return'<span class="target-audio-cls" data-id="'+e.key+'">'+e.label+"</span>"},getAudioListData:function(e){var t=this;t.targetAudios.length=0,t.sourceAudios.length=0,(0,p.getRawJson)("/listen/series/set/list",{series_id:e}).then(function(e){if(e.resultCode)t.$Message.error("获取音频数据失败");else{e.data.already_set_result.list.forEach(function(e,o){t.targetAudios.push(e.id)}),e.data.all_set_result.list.forEach(function(e,o){t.sourceAudios.push({key:e.id,label:e.title})});var o=document.querySelectorAll("#audio-config-id .ivu-transfer-list-content")[1];u.default.create(o,{filter:".ivu-transfer-list-content-not-found",onEnd:function(e){}})}})},remoteSort:function(e){console.log(e);var t=this,o="asc"==e.order?"":"-";(0,p.getRawJson)("/listen/series/rear/sort",{name:e.key,sort:o,page_num:1,rows:10}).then(function(e){e.resultCode?t.$Message.error("获取专辑列表数据失败"):(t.listdata=e.data.list,t.albumPage=e.data.count)})},getTargetKeys:function(){return this.getMockData().filter(function(){return 2*Math.random()>1}).map(function(e){return e.key})},emptyAll:function(){this.newAlbumForm.name="",this.img.viewImg.length=0,this.audioList.length=0,this.audioList2.length=0,this.newAlbumForm.remarks="",this.saveUploadBtnShow=!1},getAliOSSData:function(e){var t=(0,c.default)(),o=e.name.split("."),i=o[o.length-1],n=t+"."+i,r={uri:this.audio.viewHost+n,title:o[0],duration:0,uid:e.uid};return this.tempAudioFile[e.uid]=r,{OSSAccessKeyId:this.audio.options.accessid,policy:this.audio.options.policy,Signature:this.audio.options.signature,success_action_status:"200",key:this.audio.options.dir+n}},getAlbumList:function(e,t){var o=this,t=t||"";(0,p.getRawJson)("/listen/series/list?page_num="+e+"&rows=10&name="+t).then(function(e){e.resultCode||(o.listdata=e.data.list,o.albumPage=e.data.count)})},handleSearch:function(){this.getAlbumList(1,this.searchForm.albumName)},createAlbum:function(){this.emptyAll(),this.$refs.newAlbumForm.resetFields(),this.newAlbumShow=!0,this.newFlag=!0,this.$refs.upload.clearFiles()},pageDown:function(e){this.getAlbumList(e,null)},changeStatus:function(e,t){var o=this;(0,p.postJson)("/listen/series/open",{id:e,status:t},!1).then(function(e){e.resultCode?o.$Message.error("操作失败！"):o.$Message.success("操作成功！")})},newAlbumOk:function(){},createFilename:function(e){var t=(0,c.default)(),o=e.name.split(".");return t+"."+o[o.length-1]},imgFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件 "+e.name+" 格式不正确，请上传 jpg 或 png 格式的图片。"})},imgforeUpload:function(e){if("object"!=s(this.img.options))return this.$Message.error("配置信息还未生成，请稍后!"),!1;var t=this.createFilename(e);return this.img.currentFileName=t,this.img.query={OSSAccessKeyId:this.img.options.accessid,policy:this.img.options.policy,Signature:this.img.options.signature,success_action_status:"200",key:this.img.options.dir+t},new Promise(function(e,t){setTimeout(function(){e()},100)})},imgUploadEorror:function(e){this.$Message.info("图片上传失败 请重试")},imgUploadOK:function(e,t,o){this.img.viewImg=[],this.img.viewImg.push(this.img.viewHost+this.img.currentFileName)},handleView:function(e){this.previewUrl=e,this.preview=!0},audioFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件 "+e.name+" 格式不正确，请上传 mp3 格式的音频。"})},audioFormatError2:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件 "+e.name+" 格式不正确，请上传 mp3 格式的音频。"})},audioBeforeUpload:function(e){},audioBeforeUpload2:function(e){},onAudioSuccess:function(e,t,o){this.audioList.push(this.tempAudioFile[t.uid]),this.audioList.length>0&&(this.saveUploadBtnShow=!0)},onAudioSuccess2:function(e,t,o){this.audioList2.push(this.tempAudioFile[t.uid])},onAudioError:function(e,t,o){this.$Message.error("音频上传失败！")},onAudioError2:function(e,t,o){this.$Message.error("音频上传失败！")},deleteAudio:function(e){var t=this;this.audioList.forEach(function(o,i){e==o.uid&&t.audioList.splice(i,1)}),0==this.audioList.length&&(this.saveUploadBtnShow=!1)},delFile:function(e,t){var o=this;this.audioList.forEach(function(t,i){e.uid==t.uid&&o.audioList.splice(i,1)}),0==this.audioList.length&&(this.saveUploadBtnShow=!1)},delFile2:function(e,t){var o=this;this.audioList2.forEach(function(t,i){e.uid==t.uid&&o.audioList2.splice(i,1)})},getDuration:function(e){var t=this;this.audioDurationList.push(e.srcElement.duration),this.audioList.forEach(function(e,o){e.duration=t.audioDurationList[o]})},getDuration2:function(e){var t=this;this.audioDurationList2.push(e.srcElement.duration),this.audioList2.forEach(function(e,o){e.duration=t.audioDurationList2[o]}),console.log(this.audioList2)},handleSubmit:function(e){var t=this;t.submitBtnStatus=!0,t.$refs[e].validate(function(e){e?(0,p.postJson)("/listen/series/add",{name:t.newAlbumForm.name,cover:t.img.viewImg[0],brief:t.newAlbumForm.remarks,series_id:t.series_id?t.series_id:"",res_ids:t.res_ids?t.res_ids:[]},!1).then(function(e){e.resultCode?t.$Message.error("表单验证失败!错误原因："+e.resultMsg):(t.$Message.success("专辑新建成功"),t.newAlbumShow=!1,t.getAlbumList(1,null))}):(t.submitBtnStatus=!1,t.$Message.error("表单验证失败!"))})},handleReset:function(e){this.$refs[e].resetFields()},configAudio:function(e){this.configSwitch=!0,this.getAudioListData(e)},deleteAlbum:function(e){var t=this;(0,p.postJson)("/listen/series/delete",{id:e},!1).then(function(e){e.resultCode?t.$Message.error("删除失败!请重试"):(t.$Message.success("删除成功!"),t.getAlbumList(1,null))})},transferAudio:function(e,t,o){console.log(e),this.targetAudios=e},filterAlbum:function(e,t){return e.label.indexOf(t)>-1},saveUpload:function(){if(this.audioList.length){var e=this;(0,p.postJson)("/listen/series/upload/audio",{audio:this.audioList},!1).then(function(t){t.resultCode||(e.series_id=t.data.series_id,e.res_ids=t.data.res_ids,e.$Message.success("音频保存成功"))})}else this.$Message.warning("请先上传音频")},completeUpload:function(){if(this.audioList2.length){var e=this;(0,p.postJson)("/listen/series/upload",{audio:this.audioList2,series_id:this.currentAlbumId},!1).then(function(t){t.resultCode?e.$Message.error("音频上传失败"+t.resultMsg):(e.getAlbumList(1,null),e.$Message.success("音频上传成功"),e.uploadAudioOnly=!1)})}else this.$Message.warning("请先上传音频")},handleUpdata:function(){var e=this;e.submitBtnStatus=!0,e.$refs.newAlbumForm.validate(function(t){t?(0,p.postJson)("/listen/series/update",{id:e.currentAlbumId,name:e.newAlbumForm.name,cover:e.img.viewImg[0],brief:e.newAlbumForm.remarks},!1).then(function(t){t.resultCode?e.$Message.error("修改失败，原因"+t.resultMsg):(e.getAlbumList(1,null),e.$Message.success("修改成功"),e.newAlbumShow=!1)}):(e.submitBtnStatus=!1,e.$Message.error("表单验证失败!"))})},closeConfigModal:function(){this.configSwitch=!1},saveConfig:function(){var e=this,t=[];e.saveConfigBtn=!1,e.sourceAudios.forEach(function(e,o){t.push(e.key)});var o=document.querySelectorAll("#audio-config-id .ivu-transfer-list-content")[1],i=o.querySelectorAll(".target-audio-cls"),n=[];i.forEach(function(e,t){n.push(e.getAttribute("data-id"))});var r=t.filter(function(t){return!e.targetAudios.includes(t)});(0,p.postJson)("/listen/series/set/go",{series_id:e.currentAlbumId,already_set:n,can_set:r},!1).then(function(t){t.resultCode?e.$Message.error("配置失败,原因"+t.resultMsg):(e.getAlbumList(1,null),e.configSwitch=!1,e.$Message.success("配置成功"))})},searchFormMultiKeys:function(e,t){if(!t)return e.label.indexOf(t)>-1;var o=!1;return t.trim().split(/\s+/g).forEach(function(t,i){e.label.indexOf(t)>-1&&(o=!0)}),!!o||void 0}}),r)},function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}Object.defineProperty(t,"__esModule",{value:!0});var r=o(3),s=(i(r),o(4)),a=i(s),l=o(16),u=i(l),d=o(2),c=o(5);t.default={data:function(){var e=this;return{albumStatus:!1,albumPage:10,importAudiosShow:!1,audioEditShow:!1,currentAudioId:"",initPageNum:1,searchForm:{audioName:""},importAudiosForm:{name:""},editAudiosForm:{name:"",remarks:""},relateCol:[{title:"音频名称",key:"albumNameRelate"}],relateData:[],listcol:[{title:"音频单曲",key:"title"},{title:"备注",key:"remark"},{title:"时长",key:"duration",width:88,align:"center"},{title:"关联状态",key:"relate_info",align:"center",width:88,render:function(t,o){var i="",n=[];if(o.row.relate_info)return i="已关联",o.row.relate_info.forEach(function(e,t){n.push({albumNameRelate:e.series_name})}),e.relateData=n,t("Button",{props:{type:"primary",size:"small"},on:{click:function(){e.$Modal.info({title:"关联状态",render:function(t,o){return t("Table",{props:{columns:e.relateCol,data:e.relateData}})}})}}},i)}},{title:"创建时间",key:"create_time",sortable:!0},{title:"修改时间",key:"modify_time",sortable:!0},{title:"操作",key:"operate",width:140,render:function(t,o){return t("div",{attrs:{class:"configCls"}},[t("Button",{props:{type:"primary",size:"small"},on:{click:function(){e.currentAudioId=o.row.id,e.audioEditShow=!0,e.editAudiosForm.name=o.row.title,e.editAudiosForm.remarks=o.row.remark}}},"编辑"),t("Button",{props:n({type:"primary",size:"small"},"type","error"),on:{click:function(){e.deleteAudio(o.row.id)}}},"删除")])}}],listdata:[],img:{cover:{status:"",url:"",name:"",filename:""},options:null,query:{},action:"http://xb-3sc.oss-cn-hangzhou.aliyuncs.com",viewHost:"http://xb-3sc.xingbook.com/xb-3sc/",viewImg:[],visible:!1,currentFileName:""},audio:{query:{},format:["mp3"],action:"http://xb-vod.oss-cn-hangzhou.aliyuncs.com",options:null,file:{filename:"",size:0,name:"",duration:0},audioFlag:!1,viewHost:"http://xb-vod.oss-cn-hangzhou.aliyuncs.com/audio/"},audioList:[],tempAudioFile:{},audioDurationList:[],saveBtnStatus:!1,editAudiosFormRuleValidate:{name:[{required:!0,message:"音频名称不能为空",trigger:"blur"}]}}},created:function(){var e=this;(0,d.getAliyunToken)("xb-vod").then(function(t){0==t.resultCode&&(e.audio.action=t.data.host,e.audio.options=t.data)}),(0,d.getAliyunToken)("xb-3sc").then(function(t){0==t.resultCode&&(e.img.action=t.data.host,e.img.options=t.data)}),this.getAudioList(1,null)},mounted:function(){var e=this,t=this.$refs.upload;t.post=function(o){if(t.format.length){var i=o.name.split(".").pop().toLocaleLowerCase();if(!t.format.some(function(e){return e.toLocaleLowerCase()===i}))return t.onFormatError(o,t.fileList),!1}if(t.maxSize&&o.size>1024*t.maxSize)return t.onExceededSize(o,t.fileList),!1;t.handleStart(o),(new FormData).append(t.name,o),(0,u.default)({headers:t.headers,withCredentials:t.withCredentials,file:o,data:e.getAliOSSData(o),filename:t.name,action:t.action,onProgress:function(e){t.handleProgress(e,o)},onSuccess:function(e){t.handleSuccess(e,o)},onError:function(e,i){t.handleError(e,i,o)}})}},computed:{},methods:{remoteSort:function(e){var t=this,o="asc"==e.order?"":"-";(0,c.getRawJson)("/listen/audio/rear/sort",{name:e.key,sort:o,page_num:1,rows:10}).then(function(e){e.resultCode?t.$Message.error("获取音频列表数据失败"):(t.listdata=e.data.list,t.albumPage=e.data.count,t.initPageNum=1)})},getTargetKeys:function(){return this.getMockData().filter(function(){return 2*Math.random()>1}).map(function(e){return e.key})},getAliOSSData:function(e){var t=(0,a.default)(),o=e.name.split("."),i=o[o.length-1],n=t+"."+i,r={uri:this.audio.viewHost+n,title:o[0],duration:0,uid:e.uid};return this.tempAudioFile[e.uid]=r,{OSSAccessKeyId:this.audio.options.accessid,policy:this.audio.options.policy,Signature:this.audio.options.signature,success_action_status:"200",key:this.audio.options.dir+n}},getAudioList:function(e,t){var o=this,t=t||"";(0,c.getRawJson)("/listen/audio/list?page_num="+e+"&rows=10&name="+t).then(function(e){e.resultCode?o.$Message.error("获取音频列表数据失败"):(o.listdata=e.data.list,o.albumPage=e.data.count)})},handleSearch:function(){this.getAudioList(1,this.searchForm.albumName)},startUpload:function(){this.importAudiosShow=!0},pageDown:function(e){this.getAudioList(e,null)},createFilename:function(e){var t=(0,a.default)(),o=e.name.split(".");return t+"."+o[o.length-1]},audioFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件 "+e.name+" 格式不正确，请上传 mp3 格式的音频。"})},audioBeforeUpload:function(e){},onAudioSuccess:function(e,t,o){this.audioList.push(this.tempAudioFile[t.uid])},onAudioError:function(e,t,o){this.$Message.error("音频上传失败！")},getDuration:function(e){var t=this;this.audioDurationList.push(e.srcElement.duration),this.audioList.forEach(function(e,o){e.duration=t.audioDurationList[o]})},handleSubmit:function(e){var t=this;t.audioList.length?(0,c.postJson)("/listen/audio/add",{audio:t.audioList},!1).then(function(e){e.resultCode?t.$Message.error("音频上传失败"):(t.$Message.success("音频上传成功"),t.getAudioList(1,null),t.importAudiosShow=!1)}):t.$Message.error("请先上传音频")},closeImportModal:function(){this.importAudiosShow=!1},closeEditModal:function(){this.audioEditShow=!1},saveAudio:function(e){var t=this,o=this;o.saveBtnStatus=!0,o.$refs[e].validate(function(e){e?(0,c.postJson)("/listen/audio/update",{id:o.currentAudioId,title:o.editAudiosForm.name,remark:o.editAudiosForm.remarks},!1).then(function(e){console.log(e),e.resultCode?o.$Message.error("音频修改失败!错误原因："+e.resultMsg):(o.getAudioList(1,null),o.$Message.success("音频修改成功"),o.audioEditShow=!1)}):(o.submitBtnStatus=!1,t.$Message.error("表单验证失败!"))})},deleteAudio:function(e){var t=this;(0,c.postJson)("/listen/audio/delete",{id:e},!1).then(function(e){e.resultCode?t.$Message.error("音频删除失败"):(t.$Message.success("音频删除成功"),t.getAudioList(1,null))})},delFile:function(e,t){var o=this;this.audioList.forEach(function(t,i){e.uid==t.uid&&o.audioList.splice(i,1)}),0==this.audioList.length&&(this.saveUploadBtnShow=!1)}}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(18),n=function(e){return e&&e.__esModule?e:{default:e}}(i),r=o(2);t.default={data:function(){var e=this;return{doSeqEditInput:null,doSeqOldVal:"",doNameEditInput:null,doNameOldVal:"",handleModalId:"",themeStatus:"",deleteId:"",deleteModal1:!1,alreadlySet1:[],alreadlySet:[],targetKeys1:[],targetKeys:[],modal2:!1,modal3:!1,addModal:!1,isTableSort:!1,loading:!0,newList:[],olderList:[],newList1:[],olderList1:[],pageTotal:0,page_num:1,rows:50,selectInput1:[{value:"0",label:"从小到大"},{value:"1",label:"从大到小"}],selectInput:[{value:"create",label:"按创建时间排序"},{value:"modify",label:"按修改时间排序"},{value:"name",label:"按名称排序"}],formValidate:{name:""},formItem:{name:""},columns2:[{title:"时间点",key:"interval_name"},{title:"配置",key:"series_count",render:function(t,o){return t("div",{attrs:{class:"configCls"}},[t("span",o.row.series_count),t("Button",{props:{type:"primary",size:"small",shape:"circle"},on:{click:function(){e.show(o.row.id)}}},"配置")])}}],columns1:[{title:"模块名称",key:"name",render:function(t,o){return t("div",{attrs:{class:"nameInput"},on:{dblclick:function(t){return e.doSeqEditInput&&0==e.doSeqEditInput.disabled?(e.doSeqEditInput.focus(),void e.$Message.error("请先保存上一条数据")):e.doNameEditInput&&0==e.doNameEditInput.disabled?(e.doNameEditInput.focus(),void e.$Message.error("请先保存上一条数据")):(e.doNameEditInput=t.toElement,e.doNameOldVal=e.doNameEditInput.value,t.toElement.disabled=!t.toElement.disabled,void e.doNameEditInput.focus())}}},[t("Input",{attrs:{type:"text",value:o.row.name,disabled:!0,maxlength:50},on:{"on-enter":function(){e.doEditName(o.row,e.doNameEditInput.value)},"on-keydown":function(t){"Escape"==t.key&&(e.doNameEditInput.value=e.doNameOldVal,e.doNameEditInput.disabled=!0)}}})])}},{title:"排序",key:"seq_no",render:function(t,o){return t("div",{attrs:{class:"seqInput"},on:{dblclick:function(t){if(e.doNameEditInput&&0==e.doNameEditInput.disabled)return e.doNameEditInput.focus(),void e.$Message.error("请先保存上一条数据");if(e.doSeqEditInput&&0==e.doSeqEditInput.disabled)return e.doSeqEditInput.focus(),void e.$Message.error("请先保存上一条数据");if(e.doSeqEditInput=t.toElement,e.doSeqOldVal=e.doSeqEditInput.value,0==t.toElement.disabled){/^(0|[1-9][0-9]*)$/.test(e.doSeqEditInput.value)&&(t.toElement.disabled=!t.toElement.disabled)}else t.toElement.disabled=!t.toElement.disabled;e.doSeqEditInput.focus()}}},[t("Input",{attrs:{type:"text",value:o.row.seq_no,disabled:!0},on:{"on-enter":function(){e.doEditSeq(o.row,e.doSeqEditInput.value)},"on-keydown":function(t){"Escape"==t.key&&(console.log(t.key),console.log(e.doSeqEditInput),e.doSeqEditInput.value=e.doSeqOldVal,e.doSeqEditInput.disabled=!0)}}})])}},{title:"配置",key:"series_count",render:function(t,o){return t("div",{attrs:{class:"configCls"}},[t("span",o.row.series_count),t("Button",{props:{type:"primary",size:"small",shape:"circle"},on:{click:function(){console.log(o.row.tag_id),e.show1(o.row.tag_id)}}},"配置")])}},{title:"上架状态",key:"abandon_flag",render:function(t,o){return t("i-switch",{props:{size:"large",value:"0"==o.row.abandon_flag},on:{input:function(t){e.changeStatus(o.row.tag_id,t?"on":"off")}}},[t("span",{slot:"open"},"上架"),t("span",{slot:"close"},"下架")])}},{title:"创建时间",key:"create_time",sortable:!0},{title:"修改时间",key:"modify_time",sortable:!0},{title:"操作",key:"action",width:150,align:"center",render:function(t,o){return t("div",[t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.deleteModal1=!0,e.deleteId=o.row.tag_id}}},"删除")])}}],data1:[],data2:[],ruleValidate:{name:[{required:!0,message:"名称不能为空",trigger:"blur"},{max:20,message:"名称长度不能超过20",trigger:"blur"}]}}},created:function(){this.getListData(),this.getModalListData()},computed:{user:function(){return this.$store.state.user?this.$store.state.user:{username:"",is_staff:!1,is_superuser:!1}}},methods:{sortChange:function(e){var t=this,o="";o="asc"==e.order?"":"-",(0,r.modalListSort)(e.key,o,this.page_num,this.rows).then(function(e){0==e.resultCode?(t.pageTotal=e.data.count,t.data1=e.data.list):t.$Message.error(e.resultMsg)})},doAdd:function(){this.addModal=!0},doEditName:function(e,t){var o=this;if(""==t)return this.doNameEditInput.focus(),void this.$Message.error("模块名字不能为空");(0,r.editModal)(e.tag_id,t,e.seq_no).then(function(e){o.getModalListData(),o.doNameEditInput=null})},doEditSeq:function(e,t){var o=this,i=/^[0-9]*$/;if(""==t)return this.doSeqEditInput.focus(),void this.$Message.error("序号不能为空");i.test(t)?(0,r.editModal)(e.tag_id,e.name,t).then(function(e){o.getModalListData(),o.doSeqEditInput.disabled=!0,o.doSeqEditInput=null}):(this.$Message.error("序号只能输入数字"),this.doSeqEditInput.focus())},doSort:function(){},setSort1:function(){var e=this,t=document.querySelectorAll(".ivu-transfer-list-content")[1];this.sortable1=n.default.create(t,{onEnd:function(t){var o=[].concat(e.targetKeys1),i=o.splice(t.oldIndex,1)[0];o.splice(t.newIndex,0,i),e.$nextTick(function(){e.newList1=o,console.log(e.newList1)})}})},getListData:function(){var e=this;return(0,r.getModalConfigList)().then(function(t){console.log(t),e.data2=t.data.list})},getModalListData:function(){var e=this,t=this.page_num,o=this.rows;(0,r.getModalList)(t,o).then(function(t){0==t.resultCode?(e.pageTotal=t.data.count,e.data1=t.data.list):e.$Message.error(t.resultMsg)})},changeStatus:function(e,t){var o=this,i="on"==t?0:1;(0,r.changeStatusOpen)(e,i).then(function(e){o.getModalListData()})},removeModal:function(){var e=this;(0,r.deleteModal)(this.deleteId).then(function(t){e.getModalListData(),e.deleteModal1=!1,e.loading=!1})},selectChange:function(e){var t=this;console.log(e),(0,r.selectModal)(e).then(function(e){t.getModalListData()})},selectChange1:function(e){var t=this;(0,r.selectStatus)(e).then(function(e){0==e.resultCode?t.$Message.success("操作成功"):t.$Message.error(e.resultMsg)})},pageChange:function(e){this.page_num=e,this.getModalListData()},pageChangeSize:function(e){this.rows=e,this.getModalListData()},show:function(e){var t=this;this.handleModalId=e,(0,r.getTransferList)(e).then(function(e){if(0==e.resultCode){console.log(e.data.already_set_result);var o=[],i=[];e.data.all_set_result.list.forEach(function(e,t){o.push({key:e.id,label:e.name,disabled:!1})}),e.data.already_set_result.list.forEach(function(e,t){i.push(e.id)}),t.targetKeys=i,t.alreadlySet=o,t.modal3=!0}else t.$Message.error(e.resultMsg)})},show1:function(e){var t=this;this.handleModalId=e,(0,r.getTransferList1)(e).then(function(e){if(0==e.resultCode){console.log(e.data.already_set_result);var o=[],i=[],n=[];e.data.all_set_result.list.forEach(function(e,t){o.push({key:e.id,label:e.name,disabled:!1}),n.push(e.id)}),e.data.already_set_result.list.forEach(function(e,t){i.push(e.id)}),t.targetKeys1=i,t.alreadlySet1=o,t.newList1=t.targetKeys1,t.modal2=!0,t.setSort1()}else t.$Message.error(e.resultMsg)})},handleChange:function(e){this.targetKeys=e},handleChange1:function(e){var t=this;this.handleModalId;this.newList1=e,this.targetKeys1=e,console.log("newTargetKeys",this.targetKeys1),this.$nextTick(function(){t.setSort1()})},formatSeach:function(e,t){var o=[];o=t.split(",");var i=!1;return""==t?e.label:(o.forEach(function(t,n){return""==t?void o.splice(n,1):e.label.indexOf(t)>-1?i=!0:void 0}),i?e.label:void 0)},render:function(e){return e.label},render1:function(e){return e.label},ok:function(){var e=this;console.log(this.newList),(0,r.modifyTransferList)(this.handleModalId,this.targetKeys).then(function(t){0==t.resultCode?e.getListData():e.$Message.error(t.resultMsg)})},ok1:function(){var e=this;(0,r.modifyTransferList1)(this.handleModalId,this.newList1).then(function(t){0==t.resultCode?e.getModalListData():e.$Message.error(t.resultMsg)})},handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e&&(0,r.addModalConfig)(t.formValidate).then(function(e){t.getModalListData(),t.addModal=!1})})},handleClose:function(){this.addModal=!1}}}},function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=o(4),s=i(r),a=o(17),l=(i(a),o(2)),u=o(5);t.default={data:function(){var e=this,t=function(t,o,i){setTimeout(function(){e.img.viewImg.length?i():i(new Error("请选择一张导读图片"))},1e3)},o=function(t,o,i){setTimeout(function(){e.bgimg.viewImg.length?i():i(new Error("请选择一张背景图片"))},1e3)},i=function(t,o,i){setTimeout(function(){e.videoCover.viewImg.length?i():i(new Error("请选择一张视频封面图片"))},2500)},n=function(t,o,i){setTimeout(function(){e.bookCover.viewImg.length?i():i(new Error("请选择一张绘本封面图片"))},1e3)};return{modalswitch:!1,modalbook:!1,totalchildtheme:0,idslist:[],currentPageSize:10,preview:!1,markData:"",markDataLength:0,markDataDescLength:0,previewUrl:"",isNew:!0,undoid:"",showUndo:!1,descTipFlag:!1,guideTipFlag:!1,buttonDisabled:!1,bookCurrentPage:1,formItem:{subThemeName:"",subThemeDesc:"",subThemeArticle:"",picture:"",audio:"",bgpic:"",video:"",videoCover:"",bookCover:""},ruleValidate:{subThemeName:[{required:!0,message:"名称不能为空",trigger:"blur"},{type:"string",max:20,message:"名称最多20字",trigger:"blur"}],subThemeDesc:[{required:!0,message:"请输入简介",trigger:"blur"},{type:"string",max:100,message:"简介长度不能超过100",trigger:"blur"}],subThemeArticle:[{required:!0,message:"请输入导读文章",trigger:"blur"},{type:"string",max:1e3,message:"导读文章字数不能超过1000",trigger:"blur"}],picture:[{required:!0,validator:t,trigger:"change"}],audio:[{required:!0,validator:function(t,o,i){setTimeout(function(){e.audio.audioList.length?i():i(new Error("请选择一个音频文件"))},1e3)},trigger:"change"}],bgpic:[{required:!0,validator:o,trigger:"change"}],video:[{required:!0,validator:function(t,o,i){setTimeout(function(){e.video.videoList.length?i():i(new Error("请选择一个视频文件"))},1e3)},trigger:"change"}],videoCover:[{required:!0,validator:i,trigger:"change"}],book:[{required:!0,validator:function(t,o,i){setTimeout(function(){e.relatedBook.orid?i():i(new Error("请配置绘本"))},1e3)},trigger:"blur"}],bookCover:[{required:!0,validator:n,trigger:"change"}]},formInlineBook:{orid:"",bookName:""},img:{cover:{status:"",url:"",name:"",filename:""},defaultImgList:[],detailImgList:[],options:null,query:{},format:["jpg","jpeg","png"],action:"http://xb-3sc.oss-cn-hangzhou.aliyuncs.com",viewHost:"http://xb-3sc.xingbook.com/xb-3sc/",viewImg:[],visible:!1,currentFileName:""},bgimg:{cover:{status:"",url:"",name:"",filename:""},defaultImgList:[],detailImgList:[],options:null,query:{},format:["jpg","jpeg","png"],action:"http://xb-3sc.oss-cn-hangzhou.aliyuncs.com",viewHost:"http://xb-3sc.xingbook.com/xb-3sc/",viewImg:[],visible:!1,currentFileName:""},audio:{query:{},id:"",format:["mp3"],action:"http://xb-vod.oss-cn-hangzhou.aliyuncs.com",options:null,file:{filename:"",size:0,name:"",duration:0},audioFlag:!1,audioList:[],viewHost:"http://xb-vod.oss-cn-hangzhou.aliyuncs.com/audio/"},videoCover:{cover:{status:"",url:"",name:"",filename:""},options:null,query:{},format:["jpg","jpeg","png"],action:"http://xb-3sc.oss-cn-hangzhou.aliyuncs.com",viewHost:"http://xb-3sc.xingbook.com/xb-3sc/",viewImg:[],currentFileName:""},bookCover:{cover:{status:"",url:"",name:"",filename:""},options:null,query:{},format:["jpg","jpeg","png"],action:"http://xb-3sc.oss-cn-hangzhou.aliyuncs.com",viewHost:"http://xb-3sc.xingbook.com/xb-3sc/",viewImg:[],currentFileName:""},video:{query:{},id:"",format:["mp4"],videoFlag:!1,action:"http://xingbookvideo.oss-cn-hangzhou.aliyuncs.com",options:null,file:{filename:"",size:0,name:"",duration:0},viewHost:"http://xingbookvideo.oss-cn-hangzhou.aliyuncs.com/video/",currentFileName:"",videoList:[]},childListColumn:[{title:"主题内容",key:"name"},{title:"导读音频",key:"audio_uri",align:"center",render:function(t,o){return t("Button",{props:{type:"primary",size:"small"},on:{click:function(){e.showAudioModal(o.row)}}},"查看")}},{title:"教学视频",key:"video_uri",align:"center",render:function(t,o){return t("Button",{props:{type:"primary",size:"small"},on:{click:function(){e.showVideoModal(o.row)}}},"查看")}},{title:"配套绘本",key:"book_name",align:"center",render:function(e,t){if(t.row.book_uri)return e("a",{attrs:{href:"http://xb-3sc.xingbook.com/ott/t/index.html?orid="+t.row.book_uri.split("-")[0]+"&v="+t.row.book_uri.split("-")[1]+"&namespace=parent&fromWeb=yes",target:"_blank"}},t.row.book_name)}},{title:"关联状态",key:"rel",align:"center",render:function(t,o){var i=o.row.rel?"已关联":"未关联";return o.row.rel?t("div",[t("Button",{props:{type:"primary",size:"small",shape:"circle"},on:{click:function(){e.showRelationship(o.row)}}},i)]):t("div",i)}},{title:"创建时间",key:"create_time"},{title:"修改时间",key:"modify_time"}],childList:[],bookListColumn:[{title:"绘本名称",key:"title"},{title:"orid",key:"id"}],bookList:[],bookId:"",bookTotal:0,relatedBook:{showFlag:!1,title:"",orid:"",cover:""},intervalTick:0}},created:function(){var e=this;(0,l.getAliyunToken)("xb-vod").then(function(t){0==t.resultCode&&(e.audio.action=t.data.host,e.audio.options=t.data)}),(0,l.getAliyunToken)("xb-3sc").then(function(t){0==t.resultCode&&(e.img.action=t.data.host,e.img.options=t.data,e.bgimg.action=t.data.host,e.bgimg.options=t.data,e.videoCover.action=t.data.host,e.videoCover.options=t.data,e.bookCover.action=t.data.host,e.bookCover.options=t.data)}),(0,l.getAliyunToken)("xingbookvideo").then(function(t){0==t.resultCode&&(e.video.action=t.data.host,e.video.options=t.data)})},mounted:function(){this._utilGetThemeListData(1,10)},computed:{compiledMarkdown:function(){return marked(this.formItem.subThemeArticle,{sanitize:!0})},compiledMarkdownDesc:function(){return marked(this.formItem.subThemeDesc,{sanitize:!0})}},methods:{checkWords:function(){this.$refs.formValidate.validate(function(e){console.log(e)})},imgFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件 "+e.name+" 格式不正确，请上传 jpg 或 png 格式的图片。"})},audioFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件 "+e.name+" 格式不正确，请上传 mp3 格式的音频。"})},bgimgFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件 "+e.name+" 格式不正确，请上传 jpg 或 png 格式的图片。"})},videoCoverFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件 "+e.name+" 格式不正确，请上传 jpg 或 png 格式的图片。"})},bookCoverFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件 "+e.name+" 格式不正确，请上传 jpg 或 png 格式的图片。"})},videoFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件 "+e.name+" 格式不正确，请上传 mp4 格式的视频。"})},updateMarkData:function(e){this.formItem.subThemeArticle=e.target.value,this.markDataLength=this.formItem.subThemeArticle.replace(/[\r\n]/g,"").length},updateMarkDataDesc:function(e){this.formItem.subThemeDesc=e.target.value,this.markDataDescLength=this.formItem.subThemeDesc.replace(/[\r\n]/g,"").length},emptyEverything:function(){this.formItem.subThemeName="",this.formItem.subThemeDesc="",this.formItem.subThemeArticle="",this.img.viewImg=[],this.img.currentFileName="",this.bgimg.viewImg=[],this.bgimg.currentFileName="",this.videoCover.viewImg=[],this.videoCover.currentFileName="",this.bookCover.viewImg=[],this.bookCover.currentFileName="",this.audio.audioFlag=!1,this.audio.audioList=[],this.video.videoFlag=!1,this.video.videoList=[],this.relatedBook.showFlag=!1,this.relatedBook.title="",this.relatedBook.orid="",this.relatedBook.cover="",this.buttonDisabled=!1,this.$refs.formValidate.resetFields()},showModal:function(){this.modalswitch=!0,this.isNew=!0,this.emptyEverything()},subThemeListPage:function(e){this._utilGetThemeListData(e,10)},subThemeListPageCountChanged:function(e){this.currentPageSize=e,this._utilGetThemeListData(1,e)},_utilGetThemeListData:function(e,t){var o=this;(0,u.getRawJson)("/theme/child/list?page_num="+e+"&rows="+t).then(function(e){!e.resultCode&&e.data&&e.data.list.length&&(o.totalchildtheme=e.data.count,o.childList=e.data.list)})},_utilGetBookData:function(e){var t=this;(0,u.getRawJson)("/theme/child/books?page_num="+e+"&rows=10").then(function(e){if(!e.resultCode&&e.data&&e.data.list.length){var o=[];e.data.list.forEach(function(e,t){o.push({title:e.title,id:e.id,cover:e.cover})}),t.bookTotal=e.data.count,t.bookList=o}})},configBook:function(){this.modalbook=!0,this.bookCurrentPage=1,this._utilGetBookData(1)},bookPage:function(e){this._utilGetBookData(e)},selectCurrentBookRow:function(e){if(console.log(e),this.relatedBook.title=e.title,this.relatedBook.orid=e.id,this.relatedBook.cover=e.cover,e.cover){this.bookCover.viewImg=[e.cover];var t=e.cover.split("/");this.bookCover.currentFileName=t[t.length-1]}else this.bookCover.viewImg=[],this.bookCover.currentFileName=""},searchBook:function(e){var t=this;(0,u.getRawJson)("/theme/child/books?page_num=1&rows=10&orid="+t.formInlineBook.orid+"&name="+t.formInlineBook.bookName).then(function(e){if(!e.resultCode&&e.data){var o=[];e.data.list.forEach(function(e,t){o.push({title:e.title,id:e.id,cover:e.cover})}),t.bookTotal=e.data.count,t.bookList=o}})},handleSubmit:function(e){var t=this;t.buttonDisabled=!0,t.$refs[e].validate(function(e){e?(0,u.postJson)("/theme/child/add",{name:t.formItem.subThemeName,brief:t.formItem.subThemeDesc,bg_img:t.bgimg.currentFileName?t.bgimg.viewHost+t.bgimg.currentFileName:"",audio_file:{file_name:t.audio.file.name,size:t.audio.file.size,uri:t.audio.viewHost+t.audio.file.filename,duration:t.audio.file.duration,cover:t.img.currentFileName?t.img.viewHost+t.img.currentFileName:"",guide:t.formItem.subThemeArticle},video_file:{file_name:t.video.currentFileName,size:t.video.file.size,uri:t.video.viewHost+t.video.file.filename,duration:t.video.file.duration,cover:t.videoCover.currentFileName?t.videoCover.viewHost+t.videoCover.currentFileName:""},book_file:{id:t.relatedBook.orid,file_name:t.relatedBook.title,cover:t.bookCover.viewHost+t.bookCover.currentFileName}},!1).then(function(e){e.resultCode?t.$Message.error("新建子主题失败，请重试"):(t.$Message.success("新增子主题成功！"),t._utilGetThemeListData(1,t.currentPageSize),t.modalswitch=!1)}):(t.buttonDisabled=!1,t.$Message.error("表单验证失败!无法新增子主题"))})},handleReset:function(e){this.$refs[e].resetFields()},addNewTheme:function(){},cancelNewTheme:function(){},bookok:function(){this.relatedBook.orid?this.relatedBook.showFlag=!0:this.$Modal.error({content:"请必须选择一个绘本"})},bookcancel:function(){},imgforeUpload:function(e){if("object"!=n(this.img.options))return this.$Message.error("配置信息还未生成，请稍后!"),!1;var t=this.createFilename(e);return this.img.currentFileName=t,this.img.query={OSSAccessKeyId:this.img.options.accessid,policy:this.img.options.policy,Signature:this.img.options.signature,success_action_status:"200",key:this.img.options.dir+t},new Promise(function(e,t){setTimeout(function(){e()},100)})},imgUploadOK:function(e,t,o){this.img.viewImg=[],this.img.viewImg.push(this.img.viewHost+this.img.currentFileName)},imgUploadEorror:function(e){this.$Message.info("图片上传失败 请重试")},bgimgBeforeUpload:function(e){if("object"!=n(this.bgimg.options))return this.$Message.error("配置信息还未生成，请稍后!"),!1;var t=this.createFilename(e);return this.bgimg.currentFileName=t,this.bgimg.query={OSSAccessKeyId:this.bgimg.options.accessid,policy:this.bgimg.options.policy,Signature:this.bgimg.options.signature,success_action_status:"200",key:this.bgimg.options.dir+t},new Promise(function(e,t){setTimeout(function(){e()},100)})},onBgimgSuccess:function(e,t,o){this.bgimg.viewImg=[],this.bgimg.viewImg.push(this.bgimg.viewHost+this.bgimg.currentFileName)},bgimgUploadError:function(e){this.$Message.info("背景图片上传失败 请重试")},audioBeforeUpload:function(e){var t=(0,s.default)(),o=e.name.split("."),i=o[o.length-1];if("object"!=n(this.audio.options))return this.$Message.error("配置信息还未生成，请稍后!"),!1;var r=t+"."+i;return this.audio.file.filename=r,this.audio.file.size=e.size,this.audio.file.name=o[0],this.audio.query={OSSAccessKeyId:this.audio.options.accessid,policy:this.audio.options.policy,Signature:this.audio.options.signature,success_action_status:"200",key:this.audio.options.dir+r},new Promise(function(e,t){setTimeout(function(){e()},100)})},getDuration:function(e){this.audio.file.duration=e.srcElement.duration},audioUploadError:function(e,t,o){this.$Message.info("音频上传失败 请重试")},onAudioSuccess:function(e,t,o){this.audio.audioFlag=!0,this.audio.audioList=[],this.audio.audioList.push(this.audio.viewHost+this.audio.file.filename)},onAudioError:function(e,t,o){this.$Message.error("音频上传失败！")},videoCoverBeforeUpload:function(e){if("object"!=n(this.videoCover.options))return this.$Message.error("配置信息还未生成，请稍后!"),!1;var t=this.createFilename(e);return this.videoCover.currentFileName=t,this.videoCover.query={OSSAccessKeyId:this.videoCover.options.accessid,policy:this.videoCover.options.policy,Signature:this.videoCover.options.signature,success_action_status:"200",key:this.videoCover.options.dir+t},new Promise(function(e,t){setTimeout(function(){e()},100)})},getVideoDuration:function(e){this.video.file.duration=e.srcElement.duration},videoCoverUploadError:function(e,t,o){this.$Message.error("上传视频封面图片失败！请重试")},onvideoCoverSuccess:function(e,t,o){this.videoCover.viewImg=[],this.videoCover.viewImg.push(this.videoCover.viewHost+this.videoCover.currentFileName)},videoBeforeUpload:function(e){var t=(0,s.default)(),o=e.name.split("."),i=o[o.length-1],n=t+"."+i;return this.video.file.filename=n,this.video.file.size=e.size,this.video.currentFileName=o[0],this.video.query={OSSAccessKeyId:this.video.options.accessid,policy:this.video.options.policy,Signature:this.video.options.signature,success_action_status:"200",key:this.video.options.dir+n},new Promise(function(e,t){setTimeout(function(){e()},100)})},videoUploadError:function(e){this.$Message.info("视频上传失败 请重试")},handleVideoMaxSize:function(e){this.$Notice.warning({title:"超出文件大小限制",desc:"文件 "+e.name+" 太大，不能超过 500M。"})},videoUploadOk:function(e,t,o){var i=this;this.video.videoFlag=!0,window.setTimeout(function(){i.videoCover.currentFileName=i.video.file.filename.split(".")[0]+".jpg",i.videoCover.viewImg=[],i.videoCover.viewImg.push(i.videoCover.viewHost+i.videoCover.currentFileName)},2e3),this.video.videoList=[],this.video.videoList.push(this.video.viewHost+this.video.file.filename)},videoCoverLoadOk:function(){},bookCoverBeforeUpload:function(e){if("object"!=n(this.bookCover.options))return this.$Message.error("配置信息还未生成，请稍后!"),!1;var t=this.createFilename(e);return this.bookCover.currentFileName=t,this.bookCover.query={OSSAccessKeyId:this.bookCover.options.accessid,policy:this.bookCover.options.policy,Signature:this.bookCover.options.signature,success_action_status:"200",key:this.bookCover.options.dir+t},new Promise(function(e,t){setTimeout(function(){e()},100)})},bookCoverUploadError:function(e,t,o){this.$Message.error("上传绘本封面图片失败！请重试")},onbookCoverSuccess:function(e,t,o){this.bookCover.viewImg=[],this.bookCover.viewImg.push(this.bookCover.viewHost+this.bookCover.currentFileName)},handleRemoveAudio:function(){this.audio.file={}},createFilename:function(e){var t=(0,s.default)(),o=e.name.split(".");return t+"."+o[o.length-1]},showRelationship:function(e){var t=this,o=[];(0,u.getRawJson)("/theme/child/p",{id:e.id}).then(function(e){e.resultCode?t.$Message.error("获取关联状态失败"):e.data&&e.data.length?(e.data.forEach(function(e,t){o.push({name:e.name})}),t.$Modal.info({title:"查看关联状态",render:function(e,t){return e("Table",{props:{columns:[{title:"已经关联主题",key:"name"}],data:o}})}})):t.$Modal.info({title:"查看关联状态",content:"暂时无关联主题"})})},showVideoModal:function(e){this.$Modal.info({title:"播放视频",render:function(t,o){return t("video",{attrs:{src:e.video_uri,controls:"controls",width:"100%"}})}})},showAudioModal:function(e){this.$Modal.info({title:"播放音频",render:function(t,o){return t("div",{attrs:{class:"modalWrapper"}},[t("audio",{attrs:{src:e.audio_uri,controls:"controls",width:"100%"}})])}})},selectHandler:function(e){this.idslist=[],this.idslist.push(e.id)},deleteMe:function(){var e=this;e.idslist.length?(0,u.postJson)("/theme/child/remove",{id:e.idslist.join()},!1).then(function(t){t.resultCode?e.$Modal.info({title:"操作结果",content:t.resultMsg}):(e.undoid=e.idslist.join(),e.showUndo=!0,(0,u.getRawJson)("/theme/child/list",{page_num:1,rows:20}).then(function(t){t.resultCode||(e.totalchildtheme=t.data.count,e.childList=t.data.list)}))}):e.$Message.error("请选择要删除的数据行！")},modifyMe:function(){var e=this;e.isNew=!1,e.buttonDisabled=!1,this.emptyEverything(),e.idslist&&e.idslist.length?1==e.idslist.length?(0,u.getRawJson)("/theme/child/info",{id:e.idslist.join()}).then(function(t){if(t.resultCode)e.$Message.error("获取此子主题内容数据失败！请刷新重试");else{e.modalswitch=!0,e.relatedBook.showFlag=!0,e.formItem.subThemeName=t.data.name,e.formItem.subThemeDesc=t.data.brief,e.formItem.subThemeArticle=t.data.audio_file.audio_guide,e.relatedBook.title=t.data.book_file.book_name,e.relatedBook.orid=t.data.book_file.book_id;var o=t.data.video_file.video_cover,i=o.split("/"),n=t.data.book_file.book_cover,r=n.split("/"),s=t.data.audio_file.audio_uri,a=s.split("/"),l=t.data.video_file.video_uri,u=l.split("/"),d=t.data.audio_file.audio_cover,c=t.data.bg_img;if(d){var h=d.split("/");e.img.viewImg=[d],e.img.currentFileName=h[h.length-1]}else e.img.viewImg=[],e.img.currentFileName="";if(c){var m=c.split("/");e.bgimg.viewImg=[c],e.bgimg.currentFileName=m[m.length-1]}else e.bgimg.viewImg=[],e.bgimg.currentFileName="";e.videoCover.viewImg=[o],e.videoCover.currentFileName=i[i.length-1],e.bookCover.viewImg=[n],e.bookCover.currentFileName=r[r.length-1],e.audio.audioList=[s],e.video.videoList=[l],e.audio.audioFlag=!0,e.video.videoFlag=!0,e.audio.file.filename=a[a.length-1],e.video.file.filename=u[u.length-1],e.audio.id=t.data.audio_file.audio_id,e.video.id=t.data.video_file.video_id,e.bookId=t.data.book_file.book_id}}):e.$Message.error("只能修改单条数据行！"):e.$Message.error("请选择要修改的数据行!")},handleModifySubmit:function(e){var t=this;t.buttonDisabled=!0,t.$refs[e].validate(function(e){e?(console.log("try get videoCover",t.videoCover.currentFileName),console.log("try get bookCover",t.bookCover.currentFileName),console.log("try get img",t.img.currentFileName),console.log("try get bg_img",t.bgimg.currentFileName),t.buttonDisabled=!0,(0,u.postJson)("/theme/child/update",{id:t.idslist.join(),name:t.formItem.subThemeName,brief:t.formItem.subThemeDesc,bg_img:t.bgimg.currentFileName?t.bgimg.viewHost+t.bgimg.currentFileName:"",audio_file:{id:t.audio.id,file_name:t.audio.file.name,size:t.audio.file.size,uri:t.audio.viewHost+t.audio.file.filename,duration:t.audio.file.duration,cover:t.img.currentFileName?t.img.viewHost+t.img.currentFileName:"",guide:t.formItem.subThemeArticle},video_file:{id:t.video.id,file_name:t.video.currentFileName,size:t.video.file.size,uri:t.video.viewHost+t.video.file.filename,duration:t.video.file.duration,cover:t.videoCover.viewHost+t.videoCover.currentFileName},book_file:{id:t.relatedBook.orid,file_name:t.relatedBook.title,cover:t.bookCover.viewHost+t.bookCover.currentFileName}},!1).then(function(e){e.resultCode?t.$Message.error("修改子主题失败，请重试"):(t.$Message.success("修改子主题成功！"),t._utilGetThemeListData(1,t.currentPageSize),t.modalswitch=!1)})):(t.buttonDisabled=!1,t.$Message.error("表单验证失败!无法修改子主题"))})},handleView:function(e){this.previewUrl=e,this.preview=!0},handleRemove:function(e){var t=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(t.indexOf(e),1)},undoDelete:function(){var e=this;(0,u.postJson)("/theme/child/undo/remove",{id:e.undoid},!1).then(function(t){(0,u.getRawJson)("/theme/child/list",{page_num:1,rows:20}).then(function(t){t.resultCode||(e.totalchildtheme=t.data.count,e.childList=t.data.list,e.showUndo=!1,e.idslist=[])})})},deleteAudio:function(){this.audio.audioFlag=!1,this.audio.audioList.length=0},deleteVideo:function(){this.video.videoFlag=!1,this.video.videoList.length=0}}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(77),n=function(e){return e&&e.__esModule?e:{default:e}}(i),r=o(2);t.default={data:function(){var e=this;return{themeStatus:"",alreadlySet:[],targetKeys4:["1","2"],modal2:!1,removeModal:!1,ifPutOn:!1,ifPullOff:!1,ifRemovef:!1,ifUndoRemove:!1,ifUndoRemoveId:"",removeName:null,deletName:null,pageTotal:0,page_num:1,rows:10,formData:{handleThemeId:"",ifAdd:!0,addModal:!1,modifyModal:!1,modifyData:{},addData:{},getTabData:this.getTabData},formItem:{name:""},columns1:[{title:"主题名称",key:"name"},{title:"导读音频",key:"file_name",render:function(e,t){var o=t.row.uri?t.row.file_name:"暂无音频";return e("div",[e("a",{attrs:{href:t.row.uri,target:"view_window"}},o)])}},{title:"主题内容",key:"count",render:function(t,o){var i=o.row.count?o.row.count:"未配置";return t("div",[t("a",{attrs:{type:"text",size:"small"},style:{color:"#2b85e4"},on:{click:function(){e.show(o)}}},i)])}},{title:"上架状态",key:"status",render:function(e,t){return e("div",0==!!t.row.status?"下架":"上架")}},{title:"创建时间",key:"create_time"},{title:"修改时间",key:"modify_time"}],data1:[]}},created:function(){this.getTabData()},computed:{user:function(){return this.$store.state.user?this.$store.state.user:{username:"",is_staff:!1,is_superuser:!1}}},components:{AddTheme:n.default},methods:{doAdd:function(){this.formData={ifAdd:!0,addModal:!0,modifyModal:!0,addData:{},getTabData:this.getTabData}},doEdit:function(){var e=this;this.ifAdd=!1;var t=this.formData.handleThemeId;if(!t)return void this.$Message.error("请选择要修改的主题");(0,r.getInfo)(t).then(function(o){0==o.resultCode?(e.formData={ifAdd:!1,addModal:!0,modifyModal:!0,handleThemeId:t,addData:{},getTabData:e.getTabData},e.formData.modifyData=o.data):e.$Message.error(o.resultMsg)}),this.formData.addModal=!0},getClickId:function(e){this.formData.handleThemeId=e.id,this.themeStatus=e.status,this.removeName=e.name,console.log(e.status)},putOn:function(){var e=this,t=this.formData.handleThemeId;(0,r.upTheme)(t).then(function(t){0==t.resultCode?(e.$Message.success("上架成功"),e.removeModal=!1,e.getTabData(),e.formData.handleThemeId=""):e.$Message.error(t.resultMsg)})},pullOff:function(){var e=this,t=this.formData.handleThemeId;(0,r.downTheme)(t).then(function(t){0==t.resultCode?(e.removeModal=!1,e.$Message.success("下架成功"),e.getTabData(),e.formData.handleThemeId=""):e.$Message.error(t.resultMsg)})},removeTheme:function(){var e=this,t=this.formData.handleThemeId;(0,r.removeTheme)(t).then(function(o){0==o.resultCode?(e.removeModal=!1,e.$Message.success("删除成功"),e.getTabData(),e.ifUndoRemove=!0,e.ifUndoRemoveId=t,e.deletName=e.removeName,e.handleThemeId=""):e.$Message.error(o.resultMsg)})},undoRemove:function(){var e=this,t=this.ifUndoRemoveId;(0,r.undoRemoveTheme)(t).then(function(t){0==t.resultCode?(e.removeModal=!1,e.$Message.success("撤销成功"),e.getTabData(),e.ifUndoRemove=!1,e.ifUndoRemoveId="",e.formData.handleThemeId=""):e.$Message.error(t.resultMsg)})},pageChange:function(e){this.page_num=e,this.getTabData()},pageChangeSize:function(e){this.rows=e,this.getTabData()},ifHadCheck:function(e){var t=this.formData.handleThemeId;return""==this.ifUndoRemoveId&&"撤销"==e?void this.$Message.error("没有需要撤销的删除操作"):t?0==this.themeStatus&&"下架"==e?void this.$Message.error("该主题已经下架了"):1==this.themeStatus&&"上架"==e?void this.$Message.error("该主题已经上架了"):void(this.removeModal=!0):void this.$Message.error("请先选择一个主题")},show:function(e){var t=this,o=e.row.id;o&&(0,r.getChileThemelist)(o).then(function(e){if(0==e.resultCode){var o=[],i=[];e.data.can_set.forEach(function(e,t){o.push({key:e.id,label:e.name,disabled:!1})}),e.data.already_set.forEach(function(e,t){i.push(e.id),o.push({key:e.id,label:e.name,disabled:!1})}),console.log(i),t.targetKeys4=i,t.alreadlySet=o,t.modal2=!0}else t.$Message.error(e.resultMsg)})},getTabData:function(){var e=this,t=this.page_num,o=this.rows;(0,r.getThemeList)(t,o).then(function(t){0==t.resultCode?(e.pageTotal=t.data.count,e.data1=t.data.list,e.themeStatus=""):e.$Message.error(t.resultMsg)})},getTargetKeys:function(){},handleChange4:function(e){var t=this,o=this.formData.handleThemeId,i=e;(0,r.modifyChileThemelist)(o,i).then(function(o){0==o.resultCode?(t.targetKeys4=e,t.getTabData()):t.$Message.error(o.resultMsg)})},render4:function(e){return e.label}}}},function(e,t,o){"use strict";function i(e,t,o){return e=u+e,e=a(e,t),e=s(e,o),fetch(e,{credentials:"include",method:"get",headers:{Accept:"application/json"}}).then(function(e){return e.json()})}function n(e,t,o){return e=u+e,e=a(e,t),e=s(e,o),fetch(e,{credentials:"include",method:"get",headers:{Accept:"application/json"}}).then(function(e){return e.json()}).then(l)}function r(e,t){return e=u+e,fetch(e,{credentials:"include",method:"post",headers:{Accept:"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()})}function s(e,t){if(t){var o=/{\w+}/g,i=e.match(o),n=!0,r=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=a.value,d=u.substr(1,u.length-2);t[d]&&(e=e.replace(u,""+t[d]))}}catch(e){r=!0,s=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw s}}}return e}function a(e,t){if(!t)return e;e.indexOf("?")<0&&(e+="?");for(var o in t)t.hasOwnProperty(o)&&(e.indexOf("?")!==e.length-1&&e.indexOf("&")!==e.length&&(e+="&"),e=e+(o+"=")+encodeURIComponent(t[o]));return e}function l(e){if(0!==e.resultCode){if(10==e.resultCode){if(checkApp())return kf.login(function(){kf.refresh()});isInstalled()}return e.result}return e.result}Object.defineProperty(t,"__esModule",{value:!0}),t.getJson=i,t.getJsonWithFilter=n,t.postJson=r,o(19);var u="http://172.18.245.22/cms"},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.RES_AUDIO=1},function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=o(3),r=i(n),s=o(7),a=i(s),l=o(8),u=i(l),d=o(22),c=i(d),h=o(6),m=i(h),f=o(21),p=i(f),g=(o(5),o(25)),v=i(g);o(24);var b=o(23),_=i(b),y=o(2);r.default.use(u.default),r.default.use(m.default),r.default.use(a.default);var w={base:"/theme/",mode:"history",routes:c.default},k=new u.default(w),C=new m.default.Store(_.default);k.beforeEach(function(e,t,o){a.default.LoadingBar.start(),p.default.title(e.meta.title),e.matched.some(function(e){return e.meta.auth})?C.state.user?o():(0,y.checkLogin)().then(function(e){98==e.resultCode?(C.commit({type:"setLoginState",user:e.data}),o("/theme")):o("/login")}):o()}),k.afterEach(function(){a.default.LoadingBar.finish(),window.scrollTo(0,0)}),new r.default({el:"#app",router:k,store:C,render:function(e){return e(v.default)}})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(2);t.default={checkLogin:function(e){var t=e.commit;(0,i.checkLogin)().then(function(e){t({type:"setLoginState",state:!0,info:e.data})})},logout:function(e){var t=e.commit;return new Promise(function(e,o){(0,i.postLogout)().then(function(o){t({type:"setLoginState",user:null}),e()})})}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={namespaced:!0,state:{userName:"hsu"},action:{}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={setLoginState:function(e,t){return console.log("set login state"),e.user=t.user}}},,function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var r,s=o(81),a=i(s),l=o(82),u=i(l),d=o(80),c=i(d),h=o(78),m=i(h),f=o(79),p=i(f);e.exports=(r={SubTheme:a.default,Theme:u.default,Album:m.default,AudioList:p.default},n(r,"Theme",u.default),n(r,"NewPage",c.default),r)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,function(e,t){function o(e,t){var o=t||0,n=i;return n[e[o++]]+n[e[o++]]+n[e[o++]]+n[e[o++]]+"-"+n[e[o++]]+n[e[o++]]+"-"+n[e[o++]]+n[e[o++]]+"-"+n[e[o++]]+n[e[o++]]+"-"+n[e[o++]]+n[e[o++]]+n[e[o++]]+n[e[o++]]+n[e[o++]]+n[e[o++]]}for(var i=[],n=0;n<256;++n)i[n]=(n+256).toString(16).substr(1);e.exports=o},function(e,t,o){(function(t){var o,i=t.crypto||t.msCrypto;if(i&&i.getRandomValues){var n=new Uint8Array(16);o=function(){return i.getRandomValues(n),n}}if(!o){var r=new Array(16);o=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}e.exports=o}).call(t,o(10))},function(e,t,o){var i=o(1)(o(44),null,null,null);i.options.__file="/SmartCloudAdmin/SmartCloudAdmin/trunk/src/mixins/audio-upload-methods.vue",i.esModule&&Object.keys(i.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),e.exports=i.exports},function(e,t,o){var i=o(1)(o(45),null,null,null);i.options.__file="/SmartCloudAdmin/SmartCloudAdmin/trunk/src/mixins/img-upload-methods.vue",i.esModule&&Object.keys(i.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),e.exports=i.exports},function(e,t,o){o(67);var i=o(1)(o(46),o(85),"data-v-61b2af83",null);i.options.__file="/SmartCloudAdmin/SmartCloudAdmin/trunk/src/pages/Index.vue",i.esModule&&Object.keys(i.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] Index.vue: functional components are not supported with templates, they should use render functions."),e.exports=i.exports},function(e,t,o){o(69);var i=o(1)(o(47),o(90),null,null);i.options.__file="/SmartCloudAdmin/SmartCloudAdmin/trunk/src/pages/login.vue",i.esModule&&Object.keys(i.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] login.vue: functional components are not supported with templates, they should use render functions."),e.exports=i.exports},function(e,t,o){o(68);var i=o(1)(o(48),o(87),null,null);i.options.__file="/SmartCloudAdmin/SmartCloudAdmin/trunk/src/views/addTheme.vue",i.esModule&&Object.keys(i.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] addTheme.vue: functional components are not supported with templates, they should use render functions."),e.exports=i.exports},function(e,t,o){o(62);var i=o(1)(o(49),o(83),null,null);i.options.__file="/SmartCloudAdmin/SmartCloudAdmin/trunk/src/views/album.vue",i.esModule&&Object.keys(i.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] album.vue: functional components are not supported with templates, they should use render functions."),e.exports=i.exports},function(e,t,o){o(64);var i=o(1)(o(50),o(86),null,null);i.options.__file="/SmartCloudAdmin/SmartCloudAdmin/trunk/src/views/audio-list.vue",i.esModule&&Object.keys(i.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] audio-list.vue: functional components are not supported with templates, they should use render functions."),e.exports=i.exports},function(e,t,o){o(66);var i=o(1)(o(51),o(91),null,null);i.options.__file="/SmartCloudAdmin/SmartCloudAdmin/trunk/src/views/new-page.vue",i.esModule&&Object.keys(i.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] new-page.vue: functional components are not supported with templates, they should use render functions."),e.exports=i.exports},function(e,t,o){o(65);var i=o(1)(o(52),o(88),null,null);i.options.__file="/SmartCloudAdmin/SmartCloudAdmin/trunk/src/views/sub-theme.vue",i.esModule&&Object.keys(i.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] sub-theme.vue: functional components are not supported with templates, they should use render functions."),e.exports=i.exports},function(e,t,o){o(63);var i=o(1)(o(53),o(84),"data-v-1a143178",null);i.options.__file="/SmartCloudAdmin/SmartCloudAdmin/trunk/src/views/theme.vue",i.esModule&&Object.keys(i.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] theme.vue: functional components are not supported with templates, they should use render functions."),e.exports=i.exports},function(e,t,o){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"layout"},[o("div",{staticClass:"layout-content"},[o("div",{staticClass:"layout-content-main"},[o("h1",{staticClass:"padding10"},[e._v("专辑列表")]),e._v(" "),o("Form",{ref:"searchForm",attrs:{model:e.searchForm,inline:""}},[o("Form-item",[o("Input",{attrs:{type:"text",placeholder:"专辑名称"},model:{value:e.searchForm.albumName,callback:function(t){e.searchForm.albumName=t},expression:"searchForm.albumName"}})],1),e._v(" "),o("Form-item",[o("Button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("搜索")])],1),e._v(" "),o("Form-item",[o("Button",{attrs:{type:"primary"},on:{click:e.createAlbum}},[e._v("创建专辑")])],1)],1),e._v(" "),o("Table",{attrs:{custom:"",stripe:"",columns:e.listcol,data:e.listdata},on:{"on-sort-change":e.remoteSort}}),e._v(" "),o("div",{staticClass:"padding10"},[o("Page",{attrs:{"show-total":"",total:e.albumPage},on:{"on-change":e.pageDown}})],1),e._v(" "),o("Modal",{attrs:{width:"710"},on:{"on-ok":e.newAlbumOk},model:{value:e.newAlbumShow,callback:function(t){e.newAlbumShow=t},expression:"newAlbumShow"}},[o("p",{slot:"header"},[e.newFlag?o("span",[e._v("新建专辑")]):o("span",[e._v("编辑专辑")])]),e._v(" "),o("Form",{ref:"newAlbumForm",attrs:{model:e.newAlbumForm,"label-width":80,rules:e.newAlbumRuleValidate}},[o("Form-item",{attrs:{label:"专辑名称",prop:"name"}},[o("Input",{attrs:{placeholder:"建议15个字以内"},model:{value:e.newAlbumForm.name,callback:function(t){e.newAlbumForm.name=t},expression:"newAlbumForm.name"}})],1),e._v(" "),o("Form-item",{attrs:{label:"专辑封面",prop:"img"}},[o("Upload",{attrs:{format:["jpg","jpeg","png"],"on-format-error":e.imgFormatError,"show-upload-list":!1,data:e.img.query,action:e.img.action,"before-upload":e.imgforeUpload,"on-error":e.imgUploadEorror,"on-success":e.imgUploadOK}},[o("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[e._v("上传图片")])],1),e._v(" "),e._l(e.img.viewImg,function(t,i){return e.img.viewImg.length?o("div",{staticClass:"demo-upload-list"},[o("img",{attrs:{src:t,alt:"",width:"100%"}}),e._v(" "),o("div",{staticClass:"demo-upload-list-cover"},[o("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(o){e.handleView(t)}}})],1)]):e._e()}),e._v(" "),o("p",[e._v("尺寸：250*250；支持jpg,png格式")])],2),e._v(" "),o("Form-item",{directives:[{name:"show",rawName:"v-show",value:e.newFlag,expression:"newFlag"}],attrs:{label:"上传音频"}},[o("Upload",{ref:"upload",attrs:{multiple:"",format:["mp3"],"on-format-error":e.audioFormatError,"show-upload-list":!0,data:e.audio.query,"before-upload":e.audioBeforeUpload,action:e.audio.action,"on-remove":e.delFile,"on-error":e.onAudioError,"on-success":e.onAudioSuccess}},[o("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[e._v("上传音频")])],1),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"audio-sec-cls"},e._l(e.audioList,function(t){return o("div",[o("span",{staticClass:"audio-name-cls"},[e._v(e._s(t.title))]),e._v(" "),o("audio",{attrs:{src:t.uri,controls:"controls",preload:""},on:{loadedmetadata:e.getDuration}}),e._v(" "),o("span",{on:{click:function(o){e.deleteAudio(t.uid)}}},[o("Icon",{attrs:{type:"ios-trash-outline",size:"25"}})],1)])})),e._v(" "),o("p",[o("Button",{directives:[{name:"show",rawName:"v-show",value:e.saveUploadBtnShow,expression:"saveUploadBtnShow"}],attrs:{type:"warning"},on:{click:e.saveUpload}},[e._v("保存上传")])],1),e._v(" "),o("p",[e._v("暂只支持mp3格式")])],1),e._v(" "),o("Form-item",{attrs:{label:"备注"}},[o("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入备注"},model:{value:e.newAlbumForm.remarks,callback:function(t){e.newAlbumForm.remarks=t},expression:"newAlbumForm.remarks"}})],1),e._v(" "),e.newFlag?o("Form-item",[o("Tooltip",{attrs:{content:"记得点击保存上传哦！否则音频无法导入",placement:"bottom-start"}},[o("Button",{attrs:{type:"primary",disabled:e.submitBtnStatus},on:{click:function(t){e.handleSubmit("newAlbumForm")}}},[e._v("提交")])],1),e._v(" "),o("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:function(t){e.handleReset("newAlbumForm")}}},[e._v("重置")])],1):o("Form-item",[o("Button",{attrs:{type:"primary",disabled:e.submitBtnStatus},on:{click:function(t){e.handleUpdata("newAlbumForm")}}},[e._v("编辑提交")])],1)],1),e._v(" "),o("div",{slot:"footer"})],1),e._v(" "),o("Modal",{attrs:{title:"查看图片"},model:{value:e.preview,callback:function(t){e.preview=t},expression:"preview"}},[e.preview?o("img",{staticStyle:{width:"100%"},attrs:{src:e.previewUrl}}):e._e()]),e._v(" "),o("Modal",{attrs:{title:"内容配置",width:"620"},model:{value:e.configSwitch,callback:function(t){e.configSwitch=t},expression:"configSwitch"}},[o("Transfer",{ref:"transfer",attrs:{id:"audio-config-id","render-format":e.renderTransferItem,data:e.sourceAudios,titles:["未选内容","已选内容"],"target-keys":e.targetAudios,filterable:"","filter-method":e.searchFormMultiKeys,"list-style":{"text-align":"left"}},on:{"on-change":e.transferAudio}}),e._v(" "),o("div",{slot:"footer"},[o("Button",{on:{click:e.closeConfigModal}},[e._v("取消")]),e._v(" "),o("Button",{attrs:{type:"primary",diabled:e.saveConfigBtn},on:{click:e.saveConfig}},[e._v("保存")])],1)],1),e._v(" "),o("Modal",{attrs:{title:"导入音频",width:"620"},model:{value:e.uploadAudioOnly,callback:function(t){e.uploadAudioOnly=t},expression:"uploadAudioOnly"}},[o("Form",{ref:"uploadAudioForm",attrs:{model:e.uploadAudioForm,"label-width":80}},[o("Form-item",{attrs:{label:"上传音频"}},[o("Upload",{ref:"upload2",attrs:{multiple:"",format:["mp3"],"on-format-error":e.audioFormatError2,"show-upload-list":!0,data:e.audio2.query,"before-upload":e.audioBeforeUpload2,action:e.audio2.action,"on-remove":e.delFile2,"on-error":e.onAudioError2,"on-success":e.onAudioSuccess2}},[o("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[e._v("上传音频")])],1),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"audio-sec-cls"},e._l(e.audioList2,function(t){return o("div",[o("span",{staticClass:"audio-name-cls"},[e._v(e._s(t.title))]),e._v(" "),o("audio",{attrs:{src:t.uri,controls:"controls",preload:""},on:{loadedmetadata:e.getDuration2}})])})),e._v(" "),o("p",[e._v("暂只支持mp3格式")])],1),e._v(" "),o("Form-item",[o("Button",{attrs:{type:"primary"},on:{click:e.completeUpload}},[e._v("完成导入")])],1)],1),e._v(" "),o("div",{slot:"footer"})],1)],1)])])},staticRenderFns:[]},e.exports.render._withStripped=!0},function(e,t,o){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"layout"},[o("div",{staticClass:"layout-content"},[o("div",{staticClass:"layout-content-main"},[o("h3",[e._v("主题配置")]),e._v(" "),o("div",{staticClass:"layout-interact layout-padding-cls"},[o("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:e.doAdd}},[e._v("新建主题")]),e._v(" "),o("Button",{staticStyle:{"margin-right":"10px"},on:{click:e.doEdit}},[e._v("修改内容")]),e._v(" "),o("Button",{staticStyle:{"margin-right":"10px"},on:{click:function(t){e.ifHadCheck("删除"),e.ifPutOn=!1,e.ifPullOff=!1,e.ifRemovef=!0}}},[e._v("删除")]),e._v(" "),o("Button",{staticStyle:{float:"right","margin-right":"20px"},on:{click:function(t){e.ifHadCheck("下架"),e.ifPullOff=!0,e.ifPutOn=!1,e.ifRemovef=!1}}},[e._v(" 下架")]),e._v(" "),o("Button",{staticStyle:{float:"right","margin-right":"20px"},attrs:{type:"primary"},on:{click:function(t){e.ifHadCheck("上架"),e.ifPutOn=!0,e.ifPullOff=!1,e.ifRemovef=!1}}},[e._v("上架")])],1),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.ifUndoRemove,expression:"ifUndoRemove"}],staticClass:"delete-info-alert"},[o("Alert",{ref:"deleteAlert",attrs:{type:"success","show-icon":"",closable:""}},[o("div",{staticClass:"delete-alert-desc",slot:"desc"},[o("span",{staticClass:"delete-alert-tip"},[e._v('删除"'+e._s(e.deletName)+'"成功！')]),e._v(" "),o("Button",{attrs:{type:"primary"},on:{click:e.undoRemove}},[e._v("撤销")])],1)])],1),e._v(" "),o("div",{staticClass:"layout-padding-cls"},[o("Table",{attrs:{columns:e.columns1,data:e.data1,"highlight-row":""},on:{"on-row-click":e.getClickId}})],1),e._v(" "),o("div",{staticClass:"layout-padding-cls"},[o("Page",{attrs:{total:e.pageTotal,"page-size":e.rows,"page-size-opts":[10,20,30,40],"show-total":"","show-sizer":""},on:{"on-change":e.pageChange,"on-page-size-change":e.pageChangeSize}})],1)])]),e._v(" "),o("Modal",{attrs:{maskClosable:"",width:"360"},model:{value:e.removeModal,callback:function(t){e.removeModal=t},expression:"removeModal"}},[o("p",{staticStyle:{color:"#f60","text-align":"center"},slot:"header"},[o("Icon",{attrs:{type:"information-circled"}}),e._v(" "),e.ifPutOn?o("span",[e._v("上架确认")]):e._e(),e._v(" "),e.ifPullOff?o("span",[e._v("下架确认")]):e._e(),e._v(" "),e.ifRemovef?o("span",[e._v("删除确认")]):e._e()],1),e._v(" "),o("div",{staticStyle:{"text-align":"center"}},[e.ifPutOn?o("p",[e._v("你将上架该主题")]):e._e(),e._v(" "),e.ifPullOff?o("p",[e._v("你将下架该主题")]):e._e(),e._v(" "),e.ifRemovef?o("p",[e._v("你将删除该主题")]):e._e()]),e._v(" "),o("div",{slot:"footer"},[e.ifPutOn?o("Button",{attrs:{type:"error",size:"large",long:""},on:{click:e.putOn}},[e._v("上架")]):e._e(),e._v(" "),e.ifPullOff?o("Button",{attrs:{type:"error",size:"large",long:""},on:{click:e.pullOff}},[e._v("下架")]):e._e(),e._v(" "),e.ifRemovef?o("Button",{attrs:{type:"error",size:"large",long:""},on:{click:e.removeTheme}},[e._v("删除")]):e._e()],1)]),e._v(" "),o("Modal",{attrs:{maskClosable:"",title:"新建主题","mask-closable":"false"},model:{value:e.formData.addModal,callback:function(t){e.formData.addModal=t},expression:"formData.addModal"}},[o("addTheme",{attrs:{"form-data":e.formData}}),e._v(" "),o("div",{slot:"footer"})],1),e._v(" "),o("Modal",{attrs:{maskClosable:"",title:"关联子主题"},model:{value:e.modal2,callback:function(t){e.modal2=t},expression:"modal2"}},[[o("Transfer",{attrs:{data:e.alreadlySet,"target-keys":e.targetKeys4,"render-format":e.render4,titles:["未添加主题","已配置主题"],filterable:""},on:{"on-change":e.handleChange4}})],e._v(" "),o("div",{slot:"footer"})],2)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},function(e,t,o){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-main-container"},[o("Row",{attrs:{type:"flex","class-name":"app-main-content"}},[o("i-col",{staticClass:"layout-menu-left",attrs:{span:"3"}},[o("div",{staticClass:"layout-logo-left"}),e._v(" "),o("Menu",{attrs:{"active-name":"1",theme:"dark",width:"auto","open-names":["1"]}},[o("Menu-item",{attrs:{name:"1"}},[o("router-link",{staticClass:"menu-text",attrs:{to:"/theme"}},[e._v("主题配置")])],1),e._v(" "),o("Menu-item",{attrs:{name:"2"}},[o("router-link",{staticClass:"menu-text",attrs:{to:"/sub-theme"}},[e._v("子主题配置")])],1),e._v(" "),o("Menu-item",{attrs:{name:"3"}},[o("router-link",{staticClass:"menu-text",attrs:{to:"/new-page"}},[e._v("模块配置")])],1),e._v(" "),o("Menu-item",{attrs:{name:"4"}},[o("router-link",{staticClass:"menu-text",attrs:{to:"/album"}},[e._v("专辑配置")])],1),e._v(" "),o("Menu-item",{attrs:{name:"5"}},[o("router-link",{staticClass:"menu-text",attrs:{to:"/audio-list"}},[e._v("音频配置")])],1)],1)],1),e._v(" "),o("i-col",{attrs:{span:"21"}},[o("div",{staticClass:"app-header"},[o("span",[e._v("欢迎回来："+e._s(e.user.username))]),e._v(" "),o("Button",{attrs:{type:"text"},on:{click:e.logout}},[e._v("退出登录")])],1),e._v(" "),o("div",{staticClass:"app-content"},[o("router-view")],1),e._v(" "),o("div",{staticClass:"app-footer"},[e._v("\n                星宝乐园\n            ")])])],1)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},function(e,t,o){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"layout"},[o("div",{staticClass:"layout-content"},[o("div",{staticClass:"layout-content-main"},[o("h1",{staticClass:"padding10"},[e._v("音频列表：")]),e._v(" "),o("Form",{ref:"searchForm",attrs:{model:e.searchForm,inline:""}},[o("Form-item",[o("Input",{attrs:{type:"text",placeholder:"音频名称"},model:{value:e.searchForm.audioName,callback:function(t){e.searchForm.audioName=t},expression:"searchForm.audioName"}})],1),e._v(" "),o("Form-item",[o("Button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("搜索")])],1),e._v(" "),o("Form-item",[o("Button",{attrs:{type:"primary"},on:{click:e.startUpload}},[e._v("导入音频")])],1)],1),e._v(" "),o("Table",{attrs:{stripe:"",custom:"",columns:e.listcol,data:e.listdata},on:{"on-sort-change":e.remoteSort}}),e._v(" "),o("div",{staticClass:"padding10"},[o("Page",{attrs:{"show-total":"",total:e.albumPage,current:e.initPageNum},on:{"on-change":e.pageDown}})],1),e._v(" "),o("Modal",{attrs:{width:"610",title:"导入音频"},model:{value:e.importAudiosShow,callback:function(t){e.importAudiosShow=t},expression:"importAudiosShow"}},[o("Form",{ref:"importAudiosForm",attrs:{model:e.importAudiosForm,"label-width":80}},[o("Form-item",{attrs:{label:"上传音频"}},[o("Upload",{ref:"upload",attrs:{multiple:"",format:["mp3"],"on-format-error":e.audioFormatError,"show-upload-list":!0,data:e.audio.query,"before-upload":e.audioBeforeUpload,action:e.audio.action,"on-remove":e.delFile,"on-error":e.onAudioError,"on-success":e.onAudioSuccess}},[o("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[e._v("上传音频")])],1),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"audio-sec-cls"},e._l(e.audioList,function(t){return o("div",[o("span",{staticClass:"audio-name-cls"},[e._v(e._s(t.title))]),e._v(" "),o("audio",{attrs:{src:t.uri,controls:"controls",preload:""},on:{loadedmetadata:e.getDuration}})])})),e._v(" "),o("p",[e._v("暂只支持mp3格式")])],1)],1),e._v(" "),o("div",{slot:"footer"},[o("Button",{on:{click:e.closeImportModal}},[e._v("取消")]),e._v(" "),o("Button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("完成")])],1)],1),e._v(" "),o("Modal",{attrs:{width:"610",title:"编辑音频"},model:{value:e.audioEditShow,callback:function(t){e.audioEditShow=t},expression:"audioEditShow"}},[o("Form",{ref:"editAudiosForm",attrs:{model:e.editAudiosForm,"label-width":80,rules:e.editAudiosFormRuleValidate}},[o("Form-item",{attrs:{label:"音频名称",prop:"name"}},[o("Input",{attrs:{placeholder:"请输入音频名称"},model:{value:e.editAudiosForm.name,callback:function(t){e.editAudiosForm.name=t},expression:"editAudiosForm.name"}})],1),e._v(" "),o("Form-item",{attrs:{label:"备注"}},[o("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入备注"},model:{value:e.editAudiosForm.remarks,callback:function(t){e.editAudiosForm.remarks=t},expression:"editAudiosForm.remarks"}})],1)],1),e._v(" "),o("div",{slot:"footer"},[o("Button",{on:{click:e.closeEditModal}},[e._v("取消")]),e._v(" "),o("Button",{attrs:{type:"primary"},on:{click:function(t){e.saveAudio("editAudiosForm")}}},[e._v("保存")])],1)],1)],1)])])},staticRenderFns:[]},e.exports.render._withStripped=!0},function(e,t,o){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Form",{ref:"formValidate",attrs:{rules:e.ruleValidate,model:e.formValidate,"label-width":80}},[o("Form-item",{attrs:{label:"主题名称",prop:"name"}},[o("Input",{attrs:{placeholder:"建议20个字以内"},model:{value:e.formValidate.name,callback:function(t){e.formValidate.name=t},expression:"formValidate.name"}})],1),e._v(" "),o("Form-item",{attrs:{label:"简介：",prop:"brief"}},[o("div",{attrs:{id:"editor"}},[o("textarea",{attrs:{id:"markedArea"},domProps:{value:e.formValidate.brief},on:{input:e.updateBrief,blur:e.checkWords}}),e._v(" "),o("div",{ref:"markedResultDesc",domProps:{innerHTML:e._s(e.compiledBriefMarkdown)}})]),e._v(" "),o("div",{staticStyle:{color:"red"}},[e._v(e._s(e.briefTipe))])]),e._v(" "),o("Form-item",{attrs:{label:"导读图片",prop:"cover"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.img.cover.name,expression:"img.cover.name"}],staticClass:"audio-cover-preview"},["finished"===e.img.cover.status?[o("img",{attrs:{src:e.img.viewHost+e.img.cover.name}}),e._v(" "),o("div",{staticClass:"audio-cover-method"},[o("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(t){e.handleRemoveCover(t)}}})],1)]:[e.audio.file.showProgress?o("Progress",{attrs:{percent:e.audio.file.percentage,"hide-info":""}}):e._e()]],2),e._v(" "),o("Upload",{directives:[{name:"show",rawName:"v-show",value:!e.img.cover.name,expression:"!img.cover.name"}],ref:"coverUpload",staticStyle:{display:"inline-block",width:"100%"},attrs:{"show-upload-list":!1,"on-success":e.onCoverSuccess,data:e.img.query,format:e.img.format,"max-size":2048,"on-exceeded-size":e.onMaxSize,"before-upload":e.beforeCoverUpload,"on-progress":e.onCoverProgress,action:e.img.action,type:"drag"}},[o("div",{staticStyle:{width:"100%",height:"58px","line-height":"58px"}},[o("Icon",{attrs:{type:"camera",size:"30"}})],1)]),e._v(" "),o("div",[o("p",[e._v("尺寸：250*250"),o("br"),e._v("作为音频展示、分享图标、支持jpg")])])],1),e._v(" "),o("Form-item",{attrs:{label:"导读音频",prop:"uri"}},[o("div",{staticClass:"upload-main"},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.audio.file.name,expression:"audio.file.name"}],staticClass:"audio-preview"},["finished"===e.audio.file.status?[o("div",{staticClass:"audio-player"},[o("audio",{ref:"audio",attrs:{src:e.audio.viewHost+e.audio.file.filename,preload:"preload",controls:"controls"},on:{loadedmetadata:e.getAudioData}})]),e._v(" "),o("div",{staticClass:"audio-method"},[o("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(t){e.handleRemoveAudio(t)}}})],1)]:[e.audio.file.showProgress?o("Progress",{attrs:{percent:e.audio.file.percentage,"hide-info":""}}):e._e()]],2),e._v(" "),o("Upload",{directives:[{name:"show",rawName:"v-show",value:!e.audio.file.name,expression:"!audio.file.name"}],attrs:{multiple:"",header:"header",type:"drag",accept:"audio/*","show-upload-list":!1,format:e.audio.format,data:e.audio.query,action:e.audio.action,"before-upload":e.beforeAudioUpload,"on-progress":e.onAudioProgress,"on-success":e.onAudioSuccess,"on-error":e.onAudioError}},[o("div",{staticStyle:{padding:"20px 0"}},[o("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"100"}}),e._v(" "),o("p",[e._v("点击或将文件拖拽到这里上传")])],1)])],1),e._v(" "),o("div",[o("p",[e._v(e._s(e.audio.file.name))]),e._v(" "),o("p",[e._v("支持扩展名：.mp3")])])]),e._v(" "),o("Form-item",{attrs:{label:"导读文章",prop:"guide"}},[o("div",{attrs:{id:"editor"}},[o("textarea",{attrs:{id:"markedArea1"},domProps:{value:e.formValidate.guide},on:{input:e.updateGuide,blur:e.checkWords1}}),e._v(" "),o("div",{ref:"markedResult",attrs:{id:"markedResult"},domProps:{innerHTML:e._s(e.compiledGuideMarkdown)}}),e._v(" "),o("div",{staticStyle:{color:"red"}},[e._v(e._s(e.guideTipe))])])]),e._v(" "),o("Form-item",{attrs:{label:"背景图片",prop:"bg_img"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.img.bg_img.name,expression:"img.bg_img.name"}],staticClass:"audio-cover-preview"},["finished"===e.img.bg_img.status?[o("img",{attrs:{src:e.img.viewHost+e.img.bg_img.name}}),e._v(" "),o("div",{staticClass:"audio-cover-method"},[o("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(t){e.handleRemoveBgImg(t)}}})],1)]:[e.img.bg_img.showProgress?o("Progress",{attrs:{percent:e.img.bg_img.percentage,"hide-info":""}}):e._e()]],2),e._v(" "),o("Upload",{directives:[{name:"show",rawName:"v-show",value:!e.img.bg_img.name,expression:"!img.bg_img.name"}],ref:"coverUpload",staticStyle:{display:"inline-block",width:"100%"},attrs:{"show-upload-list":!1,"on-success":e.onBgImgSuccess,data:e.img.query,format:e.img.format,"max-size":2048,"on-exceeded-size":e.onMaxSize,"before-upload":e.beforeBgImgUpload,"on-progress":e.onBgImgProgress,action:e.img.action,type:"drag"}},[o("div",{staticStyle:{width:"100%",height:"58px","line-height":"58px"}},[o("Icon",{attrs:{type:"camera",size:"30"}})],1)]),e._v(" "),o("div",[o("p",[e._v("尺寸：750*400 支持jpg")])])],1),e._v(" "),o("Form-item",{attrs:{label:"背景颜色",prop:"color"}},[o("Input",{attrs:{type:"text",placeholder:"设置背景设置，默认为白色（FFFFFF）"},model:{value:e.formValidate.color,callback:function(t){e.formValidate.color=t},expression:"formValidate.color"}})],1),e._v(" "),o("Form-item",[o("div",{staticStyle:{"text-align":"right"}},[o("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("提交")]),e._v(" "),o("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:function(t){e.handleClose()}}},[e._v("取消")])],1)])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},function(e,t,o){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"layout"},[o("div",{staticClass:"layout-content"},[o("div",{staticClass:"layout-content-main"},[o("Button",{attrs:{type:"primary"},on:{click:e.showModal}},[e._v("新建")]),e._v(" "),o("Button",{on:{click:e.modifyMe}},[e._v("修改")]),e._v(" "),o("Button",{attrs:{type:"error"},on:{click:e.deleteMe}},[e._v("删除")])],1),e._v(" "),e.showUndo?o("Alert",{attrs:{type:"success","show-icon":"",closable:""}},[e._v("\n            删除 "+e._s(e.formItem.subThemeName)+" 成功！\n            "),o("span",{slot:"desc"},[e._v("点击撤销删除按钮可恢复最近一次删除操作")]),e._v(" "),o("Button",{attrs:{type:"success"},on:{click:e.undoDelete}},[e._v("撤销删除")])],1):e._e(),e._v(" "),o("Table",{attrs:{border:"",stripe:"","highlight-row":"",columns:e.childListColumn,data:e.childList},on:{"on-row-click":e.selectHandler}}),e._v(" "),o("div",{staticClass:"padding10"},[o("Page",{attrs:{total:e.totalchildtheme,"show-total":"","show-sizer":"","show-elevator":""},on:{"on-change":e.subThemeListPage,"on-page-size-change":e.subThemeListPageCountChanged}})],1),e._v(" "),o("Modal",{attrs:{title:"配置子主题内容",width:"768",styles:{top:"20px","margin-bottom":"60px"}},on:{"on-ok":e.addNewTheme,"on-cancel":e.cancelNewTheme},model:{value:e.modalswitch,callback:function(t){e.modalswitch=t},expression:"modalswitch"}},[o("Form",{ref:"formValidate",attrs:{model:e.formItem,rules:e.ruleValidate,"label-width":100}},[o("Form-item",{attrs:{label:"子主题名称",prop:"subThemeName"}},[o("Input",{attrs:{placeholder:"建议20字以内"},model:{value:e.formItem.subThemeName,callback:function(t){e.formItem.subThemeName=t},expression:"formItem.subThemeName"}})],1),e._v(" "),o("Form-item",{attrs:{label:"简介",prop:"subThemeDesc"}},[o("div",{attrs:{id:"editorDesc"}},[o("textarea",{attrs:{id:"markedAreaDesc",placeholder:"其他联系方式等备注说明"},domProps:{value:e.formItem.subThemeDesc},on:{input:e.updateMarkDataDesc,blur:e.checkWords}}),e._v(" "),o("div",{ref:"markedResultDesc",attrs:{id:"markedResultDesc"},domProps:{innerHTML:e._s(e.compiledMarkdownDesc)}})])]),e._v(" "),o("Form-item",{attrs:{label:"导读图片"}},[o("Upload",{attrs:{format:["jpg","jpeg","png"],"on-format-error":e.imgFormatError,"show-upload-list":!1,data:e.img.query,action:e.img.action,"before-upload":e.imgforeUpload,"on-error":e.imgUploadEorror,"on-success":e.imgUploadOK}},[o("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[e._v("上传图片")])],1),e._v(" "),e._l(e.img.viewImg,function(t,i){return e.img.viewImg.length?o("div",{staticClass:"demo-upload-list"},[o("img",{attrs:{src:t,alt:"",width:"100%"}}),e._v(" "),o("div",{staticClass:"demo-upload-list-cover"},[o("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(o){e.handleView(t)}}})],1)]):e._e()}),e._v(" "),o("p"),e._v(" "),o("p",[e._v("尺寸：250*250；作为音频展示、分享图标，支持jpg,png格式")])],2),e._v(" "),o("Form-item",{attrs:{label:"导读音频",prop:"audio"}},[e.audio.audioFlag?e._e():o("Upload",{attrs:{format:["mp3"],"on-format-error":e.audioFormatError,"show-upload-list":!1,data:e.audio.query,"before-upload":e.audioBeforeUpload,action:e.audio.action,"on-error":e.onAudioError,"on-success":e.onAudioSuccess}},[o("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[e._v("上传音频")])],1),e._v(" "),o("div",[e.audio.audioFlag?o("p",[e._v(e._s(e.audio.file.name))]):e._e(),e._v(" "),e.audio.audioFlag?o("audio",{attrs:{src:e.audio.viewHost+e.audio.file.filename,controls:"controls",preload:""},on:{loadedmetadata:e.getDuration}}):e._e(),e._v(" "),e.audio.audioFlag?o("span",{on:{click:e.deleteAudio}},[o("Icon",{style:{"vertical-align":"super",cursor:"pointer","margin-left":"20px"},attrs:{type:"ios-trash-outline",size:"25"}})],1):e._e()]),e._v(" "),o("p",[e._v("暂只支持mp3格式")])],1),e._v(" "),o("Form-item",{attrs:{label:"导读文章",prop:"subThemeArticle"}},[o("div",{attrs:{id:"editor"}},[o("textarea",{attrs:{id:"markedArea",placeholder:"建议1000字以内"},domProps:{value:e.formItem.subThemeArticle},on:{input:e.updateMarkData,blur:e.checkWords}}),e._v(" "),o("div",{ref:"markedResult",attrs:{id:"markedResult"},domProps:{innerHTML:e._s(e.compiledMarkdown)}})])]),e._v(" "),o("Form-item",{attrs:{label:"背景图片"}},[o("Upload",{attrs:{format:["jpg","jpeg","png"],"on-format-error":e.bgimgFormatError,"show-upload-list":!1,data:e.bgimg.query,"before-upload":e.bgimgBeforeUpload,action:e.bgimg.action,"on-error":e.bgimgUploadError,"on-success":e.onBgimgSuccess}},[o("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[e._v("上传背景图片")])],1),e._v(" "),e._l(e.bgimg.viewImg,function(t,i){return e.bgimg.viewImg.length?o("div",{staticClass:"demo-upload-list"},[o("img",{attrs:{src:t,alt:"",width:"100%"}}),e._v(" "),o("div",{staticClass:"demo-upload-list-cover"},[o("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(o){e.handleView(t)}}})],1)]):e._e()}),e._v(" "),o("p",[e._v("尺寸：750*200，支持jpg")])],2),e._v(" "),o("Form-item",{attrs:{label:"教学视频",prop:"video"}},[e.video.videoFlag?e._e():o("Upload",{attrs:{format:["mp4"],"max-size":512e3,data:e.video.query,"before-upload":e.videoBeforeUpload,action:e.video.action,"on-format-error":e.videoFormatError,"on-exceeded-size":e.handleVideoMaxSize,"on-error":e.videoUploadError,"on-success":e.videoUploadOk}},[o("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[e._v("上传视频")])],1),e._v(" "),o("div",[e.video.videoFlag?o("video",{attrs:{src:e.video.viewHost+e.video.file.filename,width:"200",controls:"controls",preload:""},on:{loadedmetadata:e.getVideoDuration}}):e._e(),e._v(" "),e.video.videoFlag?o("span",{on:{click:e.deleteVideo}},[o("Icon",{style:{"vertical-align":"super",cursor:"pointer","margin-left":"20px"},attrs:{type:"ios-trash-outline",size:"25"}})],1):e._e()])],1),e._v(" "),o("Form-item",{attrs:{label:"视频封面图片",prop:"videoCover"}},[o("Upload",{attrs:{format:["jpg","jpeg","png"],"on-format-error":e.videoCoverFormatError,"show-upload-list":!1,data:e.videoCover.query,"before-upload":e.videoCoverBeforeUpload,action:e.videoCover.action,"on-error":e.videoCoverUploadError,"on-success":e.onvideoCoverSuccess}},[o("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[e._v("上传视频封面图片")])],1),e._v(" "),e._l(e.videoCover.viewImg,function(t,i){return o("div",{staticClass:"demo-upload-list"},[o("img",{attrs:{src:t,alt:"",width:"100%"},on:{load:function(t){e.videoCoverLoadOk()}}}),e._v(" "),o("div",{staticClass:"demo-upload-list-cover"},[o("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(o){e.handleView(t)}}})],1)])})],2),e._v(" "),o("Form-item",{attrs:{label:"配套绘本",prop:"book"}},[o("Button",{attrs:{type:"ghost"},on:{click:e.configBook}},[e._v("配置")]),e._v(" "),e.relatedBook.showFlag?o("div",[o("p",[e._v("绘本名称："+e._s(e.relatedBook.title))]),e._v(" "),o("p",[e._v("绘本orid："+e._s(e.relatedBook.orid))])]):e._e()],1),e._v(" "),o("Form-item",{attrs:{label:"绘本封面图片",prop:"bookCover"}},[o("Upload",{attrs:{format:["jpg","jpeg","png"],"on-format-error":e.bookCoverFormatError,"show-upload-list":!1,data:e.bookCover.query,"before-upload":e.bookCoverBeforeUpload,action:e.bookCover.action,"on-error":e.bookCoverUploadError,"on-success":e.onbookCoverSuccess}},[o("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[e._v("上传绘本封面图片")])],1),e._v(" "),o("p",[e._v("尺寸：678*396，支持jpg,png")]),e._v(" "),e._l(e.bookCover.viewImg,function(t,i){return e.bookCover.viewImg.length?o("div",{staticClass:"demo-upload-list"},[o("img",{attrs:{src:t,alt:"",width:"100%"}}),e._v(" "),o("div",{staticClass:"demo-upload-list-cover"},[o("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(o){e.handleView(t)}}})],1)]):e._e()})],2),e._v(" "),o("Form-item",[o("div",{staticClass:"margin-top20-cls"},[e.isNew?o("Button",{attrs:{disabled:e.buttonDisabled,type:"primary"},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("新建提交")]):o("Button",{attrs:{disabled:e.buttonDisabled,type:"primary"},on:{click:function(t){e.handleModifySubmit("formValidate")}}},[e._v("修改提交")])],1)])],1),e._v(" "),o("div",{slot:"footer"})],1),e._v(" "),o("Modal",{attrs:{title:"查看图片"},model:{value:e.preview,callback:function(t){e.preview=t},expression:"preview"}},[e.preview?o("img",{staticStyle:{width:"100%"},attrs:{src:e.previewUrl}}):e._e()]),e._v(" "),o("Modal",{attrs:{title:"配置绘本",width:"800"},on:{"on-ok":e.bookok,"on-cancel":e.bookcancel},model:{value:e.modalbook,callback:function(t){e.modalbook=t},expression:"modalbook"}},[o("Form",{ref:"formInline",attrs:{model:e.formInlineBook,"label-width":80,inline:""}},[o("Form-item",{attrs:{label:"ORID",prop:"orid"}},[o("Input",{attrs:{type:"text",placeholder:"根据orid查询"},model:{value:e.formInlineBook.orid,callback:function(t){e.formInlineBook.orid=t},expression:"formInlineBook.orid"}})],1),e._v(" "),o("Form-item",{attrs:{label:"绘本名称",prop:"bookName"}},[o("Input",{attrs:{type:"text",placeholder:"根据名称查询"},model:{value:e.formInlineBook.bookName,callback:function(t){e.formInlineBook.bookName=t},expression:"formInlineBook.bookName"}})],1),e._v(" "),o("Form-item",[o("Button",{on:{click:e.searchBook}},[e._v("搜索")])],1),e._v(" "),o("Table",{attrs:{"highlight-row":"",columns:e.bookListColumn,data:e.bookList},on:{"on-row-click":e.selectCurrentBookRow}}),e._v(" "),o("div",{staticClass:"padding10"},[e.modalbook?o("Page",{attrs:{current:e.bookCurrentPage,total:e.bookTotal},on:{"on-change":e.bookPage}}):e._e()],1)],1)],1)],1)])},staticRenderFns:[]},e.exports.render._withStripped=!0},function(e,t,o){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},function(e,t,o){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"page-login layout"},[o("div",{staticClass:"login-main"},[o("div",{staticClass:"logo"},[e._v("logo")]),e._v(" "),o("div",{staticClass:"form"},[o("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleInline}},[o("Form-item",{attrs:{prop:"user"}},[o("Input",{attrs:{type:"text",placeholder:"Username"},on:{"on-enter":e.handleLogin},model:{value:e.formValidate.user,callback:function(t){e.formValidate.user=t},expression:"formValidate.user"}},[o("Icon",{attrs:{type:"ios-person"},slot:"prepend"})],1)],1),e._v(" "),o("Form-item",{attrs:{prop:"password"}},[o("Input",{attrs:{type:"password",placeholder:"Password"},on:{"on-enter":e.handleLogin},model:{value:e.formValidate.password,callback:function(t){e.formValidate.password=t},expression:"formValidate.password"}},[o("Icon",{attrs:{type:"ios-locked"},slot:"prepend"})],1)],1),e._v(" "),o("Form-item",[o("Button",{attrs:{type:"primary"},on:{click:e.handleLogin}},[e._v("登录")]),e._v(" "),o("Button",{staticStyle:{float:"right"},attrs:{type:"ghost"},on:{click:e.handleRegister}},[e._v("注册")])],1)],1)],1)])])},staticRenderFns:[]},e.exports.render._withStripped=!0},function(e,t,o){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"layout"},[o("div",{staticClass:"layout-content"},[o("div",{staticClass:"layout-content-main"},[o("h3",[e._v("智能推荐配置：")]),e._v(" "),o("div",{staticClass:"layout-padding-cls"},[o("Table",{attrs:{columns:e.columns2,data:e.data2}})],1),e._v(" "),o("h3",[e._v("主题配置")]),e._v(" "),o("div",{staticClass:"layout-interact layout-padding-cls"},[o("label",{staticStyle:{"margin-right":"10px"}},[e._v("前端排序：")]),e._v(" "),[o("Select",{staticStyle:{width:"120px"},attrs:{value:e.selectInput1[0].value},on:{"on-change":e.selectChange1}},e._l(e.selectInput1,function(t){return o("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],e._v(" "),o("label",{staticStyle:{margin:"0 10px"}},[e._v("批量排序：")]),e._v(" "),[o("Select",{staticStyle:{width:"120px"},attrs:{value:e.selectInput[0].value},on:{"on-change":e.selectChange}},e._l(e.selectInput,function(t){return o("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],e._v(" "),o("Button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"primary"},on:{click:e.doAdd}},[e._v("新建主题")])],2),e._v(" "),o("div",{staticClass:"layout-padding-cls"},[o("Table",{staticClass:"table",attrs:{columns:e.columns1,data:e.data1,"disabled-hover":"",custom:""},on:{"on-sort-change":e.sortChange}})],1),e._v(" "),o("div",{staticClass:"layout-padding-cls"},[o("Page",{attrs:{total:e.pageTotal,"page-size":e.rows,"page-size-opts":[10,20,30,40],"show-total":"","show-sizer":""},on:{"on-change":e.pageChange,"on-page-size-change":e.pageChangeSize}})],1)])]),e._v(" "),o("Modal",{attrs:{maskClosable:"",title:"添加模块"},model:{value:e.addModal,callback:function(t){e.addModal=t},expression:"addModal"}},[o("Form",{ref:"formValidate",attrs:{rules:e.ruleValidate,model:e.formValidate,"label-width":80}},[o("Form-item",{attrs:{label:"模块名称",prop:"name"}},[o("Input",{attrs:{placeholder:"建议10个字以内"},model:{value:e.formValidate.name,callback:function(t){e.formValidate.name=t},expression:"formValidate.name"}})],1),e._v(" "),o("Form-item",{staticStyle:{"margin-bottom":"0px"}},[o("div",{staticStyle:{"text-align":"right"}},[o("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formValidate")}}},[e._v("提交")]),e._v(" "),o("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:function(t){e.handleClose()}}},[e._v("取消")])],1)])],1),e._v(" "),o("div",{slot:"footer"})],1),e._v(" "),o("Modal",{attrs:{maskClosable:"",title:"配置模块"},on:{"on-ok":e.ok1},model:{value:e.modal2,callback:function(t){e.modal2=t},expression:"modal2"}},[[o("Transfer",{staticClass:"transfer1",attrs:{data:e.alreadlySet1,"target-keys":e.targetKeys1,"render-format":e.render1,titles:["未添加主题","已配置主题"],filterable:"","filter-method":e.formatSeach},on:{"on-change":e.handleChange1}})]],2),e._v(" "),o("Modal",{attrs:{maskClosable:"",title:"关联子主题"},on:{"on-ok":e.ok},model:{value:e.modal3,callback:function(t){e.modal3=t},expression:"modal3"}},[[o("Transfer",{staticClass:"transfer",attrs:{data:e.alreadlySet,"target-keys":e.targetKeys,"render-format":e.render,titles:["未添加主题","已配置主题"],filterable:"","filter-method":e.formatSeach},on:{"on-change":e.handleChange}})]],2),e._v(" "),o("Modal",{attrs:{title:"删除确认",loading:e.loading},on:{"on-ok":e.removeModal},model:{value:e.deleteModal1,callback:function(t){e.deleteModal1=t},expression:"deleteModal1"}},[o("p",[e._v("确认要删除该模块？")])])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}],[56]);